╔══════════════════════════════════════════════════════════════════════════════╗
║                     GITHUB SECRETS - ИНСТРУКЦИЯ ПО НАСТРОЙКЕ                 ║
╚══════════════════════════════════════════════════════════════════════════════╝

📍 ШАГ 1: Откройте настройки репозитория в GitHub
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
1. Откройте ваш репозиторий на GitHub
2. Перейдите: Settings → Secrets and variables → Actions
3. Нажмите: "New repository secret"


📍 ШАГ 2: Добавьте 3 обязательных секрета
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

┌─────────────────────────────────────────────────────────────────────────────┐
│ СЕКРЕТ #1: SERVER_HOST                                                      │
└─────────────────────────────────────────────────────────────────────────────┘

Name:  SERVER_HOST
Value: [ВВЕДИТЕ IP АДРЕС ВАШЕГО СЕРВЕРА]

Пример: 192.168.1.100
        или server.example.com


┌─────────────────────────────────────────────────────────────────────────────┐
│ СЕКРЕТ #2: SERVER_USER                                                      │
└─────────────────────────────────────────────────────────────────────────────┘

Name:  SERVER_USER
Value: [ВВЕДИТЕ SSH ПОЛЬЗОВАТЕЛЯ]

Пример: ubuntu
        root
        deploy


┌─────────────────────────────────────────────────────────────────────────────┐
│ СЕКРЕТ #3: SSH_PRIVATE_KEY                                                  │
└─────────────────────────────────────────────────────────────────────────────┘

Name:  SSH_PRIVATE_KEY
Value: [ВСТАВЬТЕ ПРИВАТНЫЙ КЛЮЧ ИЗ БУФЕРА ОБМЕНА - Ctrl+V]

⚠️  ВАЖНО: Вставьте ВЕСЬ ключ от "-----BEGIN" до "-----END"

Приватный ключ УЖЕ СКОПИРОВАН в буфер обмена!
Просто нажмите Ctrl+V в поле Value в GitHub.


📍 ШАГ 3: Добавьте публичный ключ на сервер
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Публичный ключ:
───────────────────────────────────────────────────────────────────────────────
ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINNJiTmQU+00YcLBEYPS0xXiHN4dhUN63ndz9MrRvmWC github-actions-deploy
───────────────────────────────────────────────────────────────────────────────

Команды для добавления на сервер:
───────────────────────────────────────────────────────────────────────────────

# Вариант А: Автоматически (если у вас есть пароль от сервера)
ssh-copy-id -i C:\Users\batoo\.ssh\github_actions.pub user@your-server-ip

# Вариант Б: Вручную
1. Подключитесь к серверу: ssh user@your-server-ip
2. Выполните команды:

   mkdir -p ~/.ssh
   chmod 700 ~/.ssh
   echo "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAINNJiTmQU+00YcLBEYPS0xXiHN4dhUN63ndz9MrRvmWC github-actions-deploy" >> ~/.ssh/authorized_keys
   chmod 600 ~/.ssh/authorized_keys


📍 ШАГ 4: Проверьте SSH подключение
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Выполните в PowerShell:
───────────────────────────────────────────────────────────────────────────────
ssh -i C:\Users\batoo\.ssh\github_actions user@your-server-ip
───────────────────────────────────────────────────────────────────────────────

✅ Если подключение прошло БЕЗ запроса пароля - всё настроено правильно!
❌ Если запрашивается пароль - проверьте что публичный ключ добавлен на сервер


📍 ШАГ 5: Опциональные секреты
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Если нужно (обычно не требуется):
───────────────────────────────────────────────────────────────────────────────
SERVER_PORT=22                        # Если SSH на другом порту
DEPLOY_PATH=/opt/taobao-scraper       # Если путь другой


═══════════════════════════════════════════════════════════════════════════════
                           📚 БЫСТРАЯ СПРАВКА
═══════════════════════════════════════════════════════════════════════════════

Расположение ключей:
───────────────────────────────────────────────────────────────────────────────
Приватный: C:\Users\batoo\.ssh\github_actions
Публичный: C:\Users\batoo\.ssh\github_actions.pub

Просмотр приватного ключа:
───────────────────────────────────────────────────────────────────────────────
type C:\Users\batoo\.ssh\github_actions

Копирование в буфер:
───────────────────────────────────────────────────────────────────────────────
type C:\Users\batoo\.ssh\github_actions | clip


═══════════════════════════════════════════════════════════════════════════════
                           ✅ CHECKLIST
═══════════════════════════════════════════════════════════════════════════════

[ ] Добавлен секрет SERVER_HOST в GitHub
[ ] Добавлен секрет SERVER_USER в GitHub
[ ] Добавлен секрет SSH_PRIVATE_KEY в GitHub
[ ] Публичный ключ добавлен на сервер (~/.ssh/authorized_keys)
[ ] Проверено SSH подключение без пароля
[ ] На сервере установлен Docker
[ ] Создана директория /opt/taobao-scraper
[ ] Создан файл docker-compose.yml на сервере
[ ] Создан файл .env с токенами на сервере


═══════════════════════════════════════════════════════════════════════════════
                        🚀 СЛЕДУЮЩИЙ ШАГ
═══════════════════════════════════════════════════════════════════════════════

После настройки всех секретов:
───────────────────────────────────────────────────────────────────────────────
git add .
git commit -m "feat: Configure CI/CD pipeline"
git push origin main

Затем откройте GitHub → Actions и наблюдайте за автоматическим деплоем! 🎉


═══════════════════════════════════════════════════════════════════════════════
Файл создан автоматически для упрощения настройки CI/CD
═══════════════════════════════════════════════════════════════════════════════

-----BEGIN OPENSSH PRIVATE KEY-----
b3BlbnNzaC1rZXktdjEAAAAABG5vbmUAAAAEbm9uZQAAAAAAAAABAAAAMwAAAAtzc2gtZW
QyNTUxOQAAACDTSYk5kFPtNGHCwRGD0tMV4hzeHYVDet53c/TK0b5lggAAAJjq4yoo6uMq
KAAAAAtzc2gtZWQyNTUxOQAAACDTSYk5kFPtNGHCwRGD0tMV4hzeHYVDet53c/TK0b5lgg
AAAEBJCjoNai0mdWkblg7MUwlLsaTdtpgBtoW9HygkHwAqz9NJiTmQU+00YcLBEYPS0xXi
HN4dhUN63ndz9MrRvmWCAAAAFWdpdGh1Yi1hY3Rpb25zLWRlcGxveQ==
-----END OPENSSH PRIVATE KEY-----
