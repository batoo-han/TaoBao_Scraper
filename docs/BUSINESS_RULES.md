# Бизнес-правила

1.  **Входные данные**: Бот принимает только действительные URL-адреса страниц товаров с сайтов `taobao.com` и `tmall.com` (включая короткие ссылки `tb.cn`).

2.  **Источники данных**:
    *   **Информация о товаре**: `tmapi.top` API является единственным источником данных о товарах.
    *   **Генерация текста**: YandexGPT API используется для создания итогового текста поста на основе "сырых" данных.
    *   **Курс валют**: `v6.exchangerate-api.com` используется для получения курса CNY к RUB.

3.  **Формат ответа**: Ответ пользователю всегда отправляется в тот же чат, откуда пришел запрос. Ответ состоит из медиагруппы (альбома) с изображениями товара и одной текстовой подписи к ней.

4.  **Требования к содержанию поста**:
    *   Текст поста генерируется нейросетью YandexGPT.
    *   Пост должен быть кратким, привлекательным и содержать ключевую информацию о товаре (название, краткое описание, размеры, цена).
    *   Цена должна быть указана в юанях как указано по ссылке.
    *   Пост должен содержать призыв к действию и релевантный хэштег.
    *   В самом низу поста должна содержаться оригинальная ссылка на товар в виде "Ссылка", где в текст ссылки зашита сама ссылка.

5.  **Управление секретами**: Все ключи API и токены должны храниться в файле `.env` и загружаться через `config.py`. Они не должны быть жестко закодированы в исходном коде.

6.  **Окружение**: Приложение должно быть готово к запуску как локально в виртуальном окружении Python, так и в виде Docker-контейнера.

7.  **Конвертация валют**: Поведение, связанное с валютой, контролируется флагом `CONVERT_CURRENCY` в файле `.env`.
    *   Если `CONVERT_CURRENCY` установлен в `True`, цена в посте будет дополнительно сконвертирована и отображена в рублях (RUB) по текущему курсу.
    *   Если `CONVERT_CURRENCY` установлен в `False`, цена будет отображаться только в юанях (CNY).
