# üì∏ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ detail_html

## –û–±—â–∞—è –ª–æ–≥–∏–∫–∞

–¢–µ–ø–µ—Ä—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±–µ—Ä—É—Ç—Å—è –∏–∑ **–¥–≤—É—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤**:

1. **sku_props** - –æ—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç–æ–≤–∞—Ä–∞ (—Ü–≤–µ—Ç–∞, –º–æ–¥–µ–ª–∏)
2. **detail_html** (item_desc API) - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

---

## –î–≤—É—Ö—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

### –≠—Ç–∞–ø 1: –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

```
1. GET /taobao/item_detail_by_url ‚Üí –ø–æ–ª—É—á–∞–µ–º item_id
           ‚Üì
2. GET /taobao/item_desc?item_id=XXX ‚Üí –ø–æ–ª—É—á–∞–µ–º detail_html
```

### –≠—Ç–∞–ø 2: –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```
sku_images (–∏–∑ sku_props)
    +
detail_images (–∏–∑ detail_html, –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ)
    =
–ò—Ç–æ–≥–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
```

---

## –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º

### –ü—Ä–æ–±–ª–µ–º–∞

–í `detail_html` –º–æ–≥—É—Ç –±—ã—Ç—å:
- **–±–∞–Ω–Ω–µ—Ä—ã**: 2480x184 (—Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ ~13:1)
- **–º–∞–ª–µ–Ω—å–∫–∏–µ –∏–∫–æ–Ω–∫–∏**: 500x600
- **–Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ**: 1500x1950, 1500x1912, 1400x1615, 1500x1808

### –†–µ—à–µ–Ω–∏–µ

–§–∏–ª—å—Ç—Ä—É–µ–º –≤ **2 —ç—Ç–∞–ø–∞**:

#### –®–∞–≥ 1: –£–±–∏—Ä–∞–µ–º –±–∞–Ω–Ω–µ—Ä—ã

```python
aspect_ratio = width / height

# –£–±–∏—Ä–∞–µ–º –µ—Å–ª–∏:
if aspect_ratio > 5.0:  # –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –±–∞–Ω–Ω–µ—Ä
    exclude()
if aspect_ratio < 0.2:  # –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –±–∞–Ω–Ω–µ—Ä
    exclude()

# –û—Å—Ç–∞–≤–ª—è–µ–º: 0.2 <= aspect_ratio <= 5.0
```

**–ü—Ä–∏–º–µ—Ä—ã:**
- ‚ùå 2480x184 ‚Üí aspect = 13.48 ‚Üí **–∏—Å–∫–ª—é—á–µ–Ω** (–±–∞–Ω–Ω–µ—Ä)
- ‚úÖ 1500x1950 ‚Üí aspect = 0.77 ‚Üí **–æ—Å—Ç–∞–≤–ª–µ–Ω**
- ‚úÖ 1400x1615 ‚Üí aspect = 0.87 ‚Üí **–æ—Å—Ç–∞–≤–ª–µ–Ω**

#### –®–∞–≥ 2: –£–±–∏—Ä–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞—é—â–∏–º–∏—Å—è —Ä–∞–∑–º–µ—Ä–∞–º–∏

```python
# –ù–∞—Ö–æ–¥–∏–º –º–µ–¥–∏–∞–Ω–Ω—É—é –ø–ª–æ—â–∞–¥—å
areas = [width * height for img in images]
median_area = statistics.median(areas)

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
ratio = img_area / median_area

# –£–±–∏—Ä–∞–µ–º –µ—Å–ª–∏:
if ratio < 0.3:  # –°–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–æ–µ
    exclude()
if ratio > 3.0:  # –°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ
    exclude()

# –û—Å—Ç–∞–≤–ª—è–µ–º: 0.3 <= ratio <= 3.0
```

**–ü—Ä–∏–º–µ—Ä:**

–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: `2480x184`, `1500x1950`, `1500x1950`, `1500x1950`, `1500x1912`, `1400x1615`, `1500x1808`, `500x600`

**–ü–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏:**

1. –£–±–∏—Ä–∞–µ–º –±–∞–Ω–Ω–µ—Ä: `2480x184` (aspect = 13.48)
2. –û—Å—Ç–∞–≤—à–∏–µ—Å—è: `1500x1950`, `1500x1950`, `1500x1950`, `1500x1912`, `1400x1615`, `1500x1808`, `500x600`
3. –ú–µ–¥–∏–∞–Ω–Ω–∞—è –ø–ª–æ—â–∞–¥—å: ~2,925,000 –ø–∏–∫—Å–µ–ª–µ–π
4. –ü—Ä–æ–≤–µ—Ä—è–µ–º `500x600` = 300,000 –ø–∏–∫—Å–µ–ª–µ–π ‚Üí ratio = 0.10 ‚Üí **–ò–°–ö–õ–Æ–ß–ï–ù**
5. –§–∏–Ω–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫: `1500x1950`, `1500x1950`, `1500x1950`, `1500x1912`, `1400x1615`, `1500x1808`

‚úÖ **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –ø–æ—Ö–æ–∂–∏–µ –ø–æ —Ä–∞–∑–º–µ—Ä—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è!

---

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö detail_html

### –û—Ç–≤–µ—Ç API

```json
{
  "code": 200,
  "data": {
    "detail_imgs": ["url1", "url2", ...],
    "detail_html": "<img align=\"absmiddle\" size=\"2480x3840\" src=\"url1\" /><img align=\"absmiddle\" size=\"2480x184\" src=\"url2\" />..."
  }
}
```

### detail_html - —ç—Ç–æ HTML —Å—Ç—Ä–æ–∫–∞!

**–ù–ï –º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤**, –∞ **HTML —Å—Ç—Ä–æ–∫–∞** —Å —Ç–µ–≥–∞–º–∏ `<img>`:

```html
<!-- –í–∞—Ä–∏–∞–Ω—Ç 1: –° –∞—Ç—Ä–∏–±—É—Ç–æ–º size -->
<img align="absmiddle" size="2480x3840" src="https://..." />
<img align="absmiddle" size="2480x184" src="https://..." />

<!-- –í–∞—Ä–∏–∞–Ω—Ç 2: –ë–ï–ó –∞—Ç—Ä–∏–±—É—Ç–∞ size (—á–∞—â–µ!) -->
<img src="https://..." />
<img src="https://..." />
```

**–í–∞–∂–Ω–æ:**
- ‚ö†Ô∏è **–∞—Ç—Ä–∏–±—É—Ç `size` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ù–ï –í–°–ï–ì–î–ê!**
- –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Ç–µ–≥–∏ `<img>` **–ë–ï–ó** `size`
- –µ—Å–ª–∏ `size` –µ—Å—Ç—å: —Ñ–æ—Ä–º–∞—Ç `size="–®–ò–†–ò–ù–êx–í–´–°–û–¢–ê"`

### –†–µ—à–µ–Ω–∏–µ: –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–∞–∑–º–µ—Ä—ã —Å–∞–º–∏!

–ö–æ–≥–¥–∞ –∞—Ç—Ä–∏–±—É—Ç–∞ `size` –Ω–µ—Ç, –º—ã:
1. –ó–∞–≥—Ä—É–∂–∞–µ–º **—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ 4KB** –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (HTTP Range –∑–∞–ø—Ä–æ—Å)
2. –ò—Å–ø–æ–ª—å–∑—É–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫—É `imagesize` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤
3. –≠—Ç–æ **–±—ã—Å—Ç—Ä–æ** –∏ **—ç–∫–æ–Ω–æ–º–Ω–æ** (–Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ–º –ø–æ–ª–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ)

---

## –ö–æ–¥ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 1. –ù–æ–≤—ã–π –º–µ—Ç–æ–¥ –≤ `tmapi.py`

```python
async def get_item_description(self, item_id: int):
    """
    –ü–æ–ª—É—á–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏.
    """
    querystring = {
        "apiToken": self.api_token,
        "item_id": item_id
    }
    
    response = await client.get(self.item_desc_api_url, params=querystring)
    return response.json()
```

### 2. –ü–∞—Ä—Å–∏–Ω–≥ HTML –≤ `scraper.py`

```python
def _parse_detail_html(self, detail_html: str) -> list:
    """
    –ü–∞—Ä—Å–∏—Ç HTML —Å—Ç—Ä–æ–∫—É —Å —Ç–µ–≥–∞–º–∏ <img> –∏ –∏–∑–≤–ª–µ–∫–∞–µ—Ç URL –∏ —Ä–∞–∑–º–µ—Ä—ã.
    """
    import re
    
    images_with_sizes = []
    
    # –ù–∞—Ö–æ–¥–∏–º –≤—Å–µ —Ç–µ–≥–∏ <img>
    img_tags = re.findall(r'<img[^>]*>', detail_html, re.IGNORECASE)
    
    for img_tag in img_tags:
        # –ò–∑–≤–ª–µ–∫–∞–µ–º src
        src_match = re.search(r'src="([^"]+)"', img_tag, re.IGNORECASE)
        if not src_match:
            continue
        
        url = src_match.group(1).strip()
        
        # –ò–∑–≤–ª–µ–∫–∞–µ–º size (–µ—Å–ª–∏ –µ—Å—Ç—å)
        size_match = re.search(r'size="(\d+)x(\d+)"', img_tag, re.IGNORECASE)
        
        if size_match:
            width = int(size_match.group(1))
            height = int(size_match.group(2))
            
            images_with_sizes.append({
                'url': url,
                'width': width,
                'height': height
            })
    
    return images_with_sizes
```

### 3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤ `scraper.py`

```python
async def _get_filtered_detail_images(self, item_id: int) -> list:
    """
    –ü–æ–ª—É—á–∞–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ item_desc –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –∏—Ö.
    """
    # 1. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ
    desc_data = await self.tmapi_client.get_item_description(item_id)
    detail_html = desc_data.get('data', {}).get('detail_html', '')  # ‚Üê STRING!
    
    # 2. –ü–∞—Ä—Å–∏–º HTML –∏ –∏–∑–≤–ª–µ–∫–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏
    images_with_sizes = self._parse_detail_html(detail_html)
    
    # 3. –§–∏–ª—å—Ç—Ä—É–µ–º
    filtered_images = self._filter_images_by_size(images_with_sizes)
    
    return [img['url'] for img in filtered_images]
```

```python
def _filter_images_by_size(self, images_with_sizes: list) -> list:
    """
    –§–∏–ª—å—Ç—Ä—É–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º.
    """
    # –®–∞–≥ 1: –£–±–∏—Ä–∞–µ–º –±–∞–Ω–Ω–µ—Ä—ã
    non_banners = [
        img for img in images_with_sizes
        if 0.2 <= (img['width'] / img['height']) <= 5.0
    ]
    
    # –®–∞–≥ 2: –£–±–∏—Ä–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞—é—â–∏–º–∏—Å—è —Ä–∞–∑–º–µ—Ä–∞–º–∏
    areas = [img['width'] * img['height'] for img in non_banners]
    median_area = statistics.median(areas)
    
    filtered = [
        img for img in non_banners
        if 0.3 <= (img['width'] * img['height'] / median_area) <= 3.0
    ]
    
    return filtered
```

---

## –û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

```python
# –ü–æ–ª—É—á–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ sku_props
sku_images = self._get_unique_images_from_sku_props(product_data)

# –ü–æ–ª—É—á–∞–µ–º –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑ detail_html
item_id = product_data.get('item_id')
detail_images = await self._get_filtered_detail_images(item_id)

# –û–±—ä–µ–¥–∏–Ω—è–µ–º: —Å–Ω–∞—á–∞–ª–∞ –≤–∞—Ä–∏–∞–Ω—Ç—ã, –ø–æ—Ç–æ–º –¥–µ—Ç–∞–ª–∏
image_urls = sku_images + detail_images
```

**–ü–æ—Ä—è–¥–æ–∫ –≤–∞–∂–µ–Ω:**
1. –°–Ω–∞—á–∞–ª–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–∞ (–∏–∑ sku_props)
2. –ü–æ—Ç–æ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Ñ–æ—Ç–æ (–∏–∑ detail_html)

---

## DEBUG —Ä–µ–∂–∏–º

```
[Scraper] –ò–∑–≤–ª–µ—á–µ–Ω–æ 13 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ sku_props
[Scraper] Detail –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: 8 ‚Üí 6 –ø–æ—Å–ª–µ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏
[Scraper] –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –±–∞–Ω–Ω–µ—Ä: 2480x184 (aspect: 13.48)
[Scraper] –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ 500x600 (–ø–ª–æ—â–∞–¥—å –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –≤ 0.10 —Ä–∞–∑ –æ—Ç –º–µ–¥–∏–∞–Ω—ã)
[Scraper] –û—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã: 1500x1950, 1500x1950, 1500x1912, 1400x1615, 1500x1808, 1500x1950
[Scraper] –ò—Ç–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: 19 (sku: 13, detail: 6)
```

---

## –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏

### –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω (aspect ratio)

| –¢–∏–ø | –î–∏–∞–ø–∞–∑–æ–Ω | –ü—Ä–∏–º–µ—Ä—ã |
|-----|----------|---------|
| ‚ùå –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –±–∞–Ω–Ω–µ—Ä | > 5.0 | 2480x184 (13.48) |
| ‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ —Ñ–æ—Ç–æ | 0.2 - 5.0 | 1500x1950 (0.77) |
| ‚ùå –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –±–∞–Ω–Ω–µ—Ä | < 0.2 | 200x1500 (0.13) |

### –ü–ª–æ—â–∞–¥—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

| –û—Ç–Ω–æ—à–µ–Ω–∏–µ –∫ –º–µ–¥–∏–∞–Ω–µ | –î–µ–π—Å—Ç–≤–∏–µ |
|---------------------|----------|
| < 0.3x | ‚ùå –ò—Å–∫–ª—é—á–∏—Ç—å (—Å–ª–∏—à–∫–æ–º –º–∞–ª–µ–Ω—å–∫–æ–µ) |
| 0.3x - 3.0x | ‚úÖ –û—Å—Ç–∞–≤–∏—Ç—å |
| > 3.0x | ‚ùå –ò—Å–∫–ª—é—á–∏—Ç—å (—Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–µ) |

---

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

| –î–æ | –ü–æ—Å–ª–µ |
|----|-------|
| –¢–æ–ª—å–∫–æ sku_props (~13 —Ñ–æ—Ç–æ) | sku_props + detail_html (~19+ —Ñ–æ—Ç–æ) |
| –ú–æ–≥—É—Ç –±—ã—Ç—å –±–∞–Ω–Ω–µ—Ä—ã | ‚úÖ –ë–∞–Ω–Ω–µ—Ä—ã –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã |
| –ú–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ | ‚úÖ –¢–æ–ª—å–∫–æ –ø–æ—Ö–æ–∂–∏–µ –ø–æ —Ä–∞–∑–º–µ—Ä—É |
| - | ‚úÖ –ë–æ–ª—å—à–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–æ–≤–∞—Ä–µ |

---

## Fallback –º–µ—Ö–∞–Ω–∏–∑–º

1. –ï—Å–ª–∏ `item_desc` API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ `sku_images`
2. –ï—Å–ª–∏ `detail_html` –ø—É—Å—Ç ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ `sku_images`
3. –ï—Å–ª–∏ –≤—Å–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –¥–ª—è detail
4. –ï—Å–ª–∏ `sku_props` –ø—É—Å—Ç ‚Üí fallback –Ω–∞ `main_imgs`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç –í–°–ï–ì–î–ê –ø–æ–ª—É—á–∏—Ç —Ö–æ—Ç—è –±—ã —á–∞—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π!

---

## –ò—Ç–æ–≥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞

```
1. –ü–æ–ª—É—á–∞–µ–º product_data (item_id)
           ‚Üì
2. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ:
   ‚îú‚îÄ –ò–∑–≤–ª–µ–∫–∞–µ–º sku_images –∏–∑ sku_props
   ‚îî‚îÄ –ü–æ–ª—É—á–∞–µ–º detail_html –ø–æ item_id
           ‚Üì
3. –§–∏–ª—å—Ç—Ä—É–µ–º detail_html:
   ‚îú‚îÄ –£–±–∏—Ä–∞–µ–º –±–∞–Ω–Ω–µ—Ä—ã (aspect ratio)
   ‚îî‚îÄ –£–±–∏—Ä–∞–µ–º —Å–ª–∏—à–∫–æ–º –æ—Ç–ª–∏—á–∞—é—â–∏–µ—Å—è (–ø–ª–æ—â–∞–¥—å)
           ‚Üì
4. –û–±—ä–µ–¥–∏–Ω—è–µ–º: sku_images + filtered_detail_images
           ‚Üì
5. –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∏—Ç–æ–≥–æ–≤—ã–π —Å–ø–∏—Å–æ–∫
```

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 23 –æ–∫—Ç—è–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–æ
