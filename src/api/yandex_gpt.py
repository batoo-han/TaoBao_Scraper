import httpx
import json
from src.core.config import settings

class YandexGPTClient:
    """
    –ö–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å YandexGPT API.
    –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –æ —Ç–æ–≤–∞—Ä–µ.
    """
    def __init__(self):
        self.base_url = "https://llm.api.cloud.yandex.net/foundationModels/v1/completion"  # –ë–∞–∑–æ–≤—ã–π URL YandexGPT API
        self.api_key = settings.YANDEX_GPT_API_KEY  # API –∫–ª—é—á, –∑–∞–≥—Ä—É–∂–∞–µ–º—ã–π –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
        self.headers = {
            "Authorization": f"Api-Key {self.api_key}",  # –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–æ–Ω–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
            "Content-Type": "application/json"
        }

    async def generate_post_content(self, product_data: dict):
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –ø–æ—Å—Ç–∞, –∏—Å–ø–æ–ª—å–∑—É—è YandexGPT.

        Args:
            product_data (dict): –°–ª–æ–≤–∞—Ä—å —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–≤–∞—Ä–µ.

        Returns:
            dict: –°–ª–æ–≤–∞—Ä—å —Å –∫–ª—é—á–∞–º–∏: title, description, characteristics, hashtags

        Raises:
            httpx.HTTPStatusError: –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å –∑–∞–≤–µ—Ä—à–∏–ª—Å—è —Å –æ—à–∏–±–∫–æ–π (4xx –∏–ª–∏ 5xx).
        """
        prompt_template = """
–¢—ã ‚Äî –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø–æ—Å—Ç—ã –¥–ª—è Telegram-–∫–∞–Ω–∞–ª–∞, –ø—Ä–æ–¥–∞—é—â–µ–≥–æ —Ç–æ–≤–∞—Ä—ã —Å Taobao/Tmall.

–¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ –∏ —Å–æ–∑–¥–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤–µ—Ä–Ω–∏ –æ—Ç–≤–µ—Ç –≤ –≤–∏–¥–µ JSON —Å–æ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
{{
  "title": "–ö—Ä–∞—Ç–∫–æ–µ –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º (–Ω–µ –±–æ–ª–µ–µ 60 —Å–∏–º–≤–æ–ª–æ–≤)",
  "description": "–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, —Å–∞–º–∞—Ä–∏–∑–∏—Ä—É—é—â–µ–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ. –ú–æ–∂–µ—Ç –±—ã—Ç—å 2-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≤–∞—Ä–∞. –ì–ª–∞–≤–Ω–æ–µ - –ü–û–õ–ù–û–¢–ê –æ–ø–∏—Å–∞–Ω–∏—è, –∞ –Ω–µ –∫—Ä–∞—Ç–∫–æ—Å—Ç—å.",
  "main_characteristics": {{
    "–Ω–∞–∑–≤–∞–Ω–∏–µ_—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏": "–∑–Ω–∞—á–µ–Ω–∏–µ –∏–ª–∏ —Å–ø–∏—Å–æ–∫"
  }},
  "additional_info": {{}},
  "hashtags": ["—Ö—ç—à—Ç–µ–≥1", "—Ö—ç—à—Ç–µ–≥2"],
  "emoji": "–ø–æ–¥—Ö–æ–¥—è—â–∏–π —ç–º–æ–¥–∑–∏ –¥–ª—è —Ç–æ–≤–∞—Ä–∞"
}}

–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–´–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø:

1. **title**: –ö—Ä–∞—Ç–∫–æ–µ, —Ü–µ–ø–ª—è—é—â–µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ –†–£–°–°–ö–û–ú —è–∑—ã–∫–µ (–ø–µ—Ä–µ–≤–µ–¥–∏ –∏ –∞–¥–∞–ø—Ç–∏—Ä—É–π –∏–∑ –¥–∞–Ω–Ω—ã—Ö)

2. **description**: –ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞, —Å–∞–º–∞—Ä–∏–∑–∏—Ä—É—é—â–µ–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ.
   - –ú–æ–∂–µ—Ç –±—ã—Ç—å 2-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Ç–æ–≤–∞—Ä–∞
   - –ì–ª–∞–≤–Ω–æ–µ - –ü–û–õ–ù–û–¢–ê –æ–ø–∏—Å–∞–Ω–∏—è, –∞ –Ω–µ –∫—Ä–∞—Ç–∫–æ—Å—Ç—å
   - –°–¥–µ–ª–∞–π —Ç–µ–∫—Å—Ç –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω—ã–º –∏ –ø—Ä–æ–¥–∞—é—â–∏–º
   - –ù–µ –ø–∏—à–∏ –æ—á–µ–≤–∏–¥–Ω—ã–µ –≤–µ—â–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä: "—ç—Ç–æ —à—Ç–∞–Ω—ã –Ω–∞–¥–µ–≤–∞—é—Ç –Ω–∞ —É–ª–∏—Ü—É", "–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Å–∫–∏", ¬´—ç—Ç–æ –∫–æ—Ñ—Ç–∞ –¥–ª—è –Ω–æ—à–µ–Ω–∏—è¬ª, "–∫—Ä–æ—Å—Å–æ–≤–∫–∏ –¥–ª—è —Ö–æ–¥—å–±—ã" –∏ –ø–æ–¥–æ–±–Ω—ã–µ). –ù–µ —Å–æ–æ–±—â–∞–π –±–∞–Ω–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏. –ù–µ –ø–æ–≤—Ç–æ—Ä—è–π –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Ç–æ–≤–∞—Ä–∞ —Å–ª–æ–≤–∞–º–∏ –≤ –æ–ø–∏—Å–∞–Ω–∏–∏. –ù–µ –ø–∏—à–∏ –ø—Ä–æ "–±–∞–∑–æ–≤—ã–µ" —Å–ø–æ—Å–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.
   - –ü–∏—à–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞, –º–∞—Ç–µ—Ä–∏–∞–ª—ã, –æ—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ—Ç–∞–ª–∏, –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–ª–∏ —Ä–µ–¥–∫–∏–µ –æ–ø—Ü–∏–∏. –ò–≥–Ω–æ—Ä–∏—Ä—É–π –≤—Å—ë, —á—Ç–æ –Ω–µ –≤—ã–¥–µ–ª—è–µ—Ç —Ç–æ–≤–∞—Ä —Å—Ä–µ–¥–∏ –¥—Ä—É–≥–∏—Ö. –ï—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω–æ–µ –∏–ª–∏ –æ—á–µ–≤–∏–¥–Ω–æ–µ, –¥–µ–ª–∞–π –ª–∞–∫–æ–Ω–∏—á–Ω–æ–µ –Ω–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–µ–∑ –≤–æ–¥—ã.
   - –í–°–Å –û–ü–ò–°–ê–ù–ò–ï –î–û–õ–ñ–ù–û –ë–´–¢–¨ –ù–ê –†–£–°–°–ö–û–ú –Ø–ó–´–ö–ï
   - –ü–ï–†–ï–í–û–î–ò –Ω–∞–∑–≤–∞–Ω–∏—è –±—Ä–µ–Ω–¥–æ–≤ —Å –∫–∏—Ç–∞–π—Å–∫–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π (Áà∑Áà∑ÁöÑÂÜúÂú∫ ‚Üí "–î–µ–¥—É—à–∫–∞ –Ω–∞ —Ñ–µ—Ä–º–µ")
   - –ù–ï –æ—Å—Ç–∞–≤–ª—è–π –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ - –≤—Å—ë –ø–µ—Ä–µ–≤–æ–¥–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π
   - –ù–ï –£–ö–ê–ó–´–í–ê–ô –≤–æ–∑—Ä–∞—Å—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–¥–ª—è –¥–µ—Ç–µ–π 3-5 –ª–µ—Ç", "–ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤–∞—è", "–¥–ª—è –≤–æ–∑—Ä–∞—Å—Ç–∞ 25-35")
   - –ú–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –ø–æ–ª (–º—É–∂—Å–∫–∞—è, –∂–µ–Ω—Å–∫–∞—è, —É–Ω–∏—Å–µ–∫—Å), –Ω–æ –ù–ï –≤–æ–∑—Ä–∞—Å—Ç

3. **main_characteristics**: –î–ò–ù–ê–ú–ò–ß–ï–°–ö–ò –ø–æ–¥–±–∏—Ä–∞–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∏—Å—Ö–æ–¥—è –∏–∑ —Ç–∏–ø–∞ —Ç–æ–≤–∞—Ä–∞!
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π –ø–æ–ª—è —Å –ø—É—Å—Ç—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π –ø–æ–ª—è –µ—Å–ª–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞ –≤ –¥–∞–Ω–Ω—ã—Ö
   - –ü–æ–¥–±–∏—Ä–∞–π –ü–†–ê–í–ò–õ–¨–ù–´–ï –Ω–∞–∑–≤–∞–Ω–∏—è –ø–æ–ª–µ–π –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ —Ç–æ–≤–∞—Ä–∞
   
   –ü–†–ê–í–ò–õ–ê –î–õ–Ø –†–ê–ó–ù–´–• –¢–ò–ü–û–í –¢–û–í–ê–†–û–í:
   
   üì¶ –û–î–ï–ñ–î–ê:
   - "–°–æ—Å—Ç–∞–≤" (–ù–ï "–ú–∞—Ç–µ—Ä–∏–∞–ª"!): –µ—Å–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª –∏–∑–≤–µ—Å—Ç–µ–Ω ("–•–ª–æ–ø–æ–∫", "–®–µ—Ä—Å—Ç—å", "–ü–æ–ª–∏—ç—Å—Ç–µ—Ä")
   - "–¶–≤–µ—Ç–∞": —Å–ø–∏—Å–æ–∫ ["–ß—ë—Ä–Ω—ã–π", "–ë–µ–ª—ã–π"] - –í–°–ï–ì–î–ê –ø–µ—Ä–µ–≤–æ–¥–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π!
   - "–†–∞–∑–º–µ—Ä—ã": —Å—Ç—Ä–æ–∫–∞ "S, M, L, XL"
   - –ü–æ—Ä—è–¥–æ–∫: –°–æ—Å—Ç–∞–≤ ‚Üí –¶–≤–µ—Ç–∞ ‚Üí –†–∞–∑–º–µ—Ä—ã
   
   üëü –û–ë–£–í–¨:
   - "–ú–∞—Ç–µ—Ä–∏–∞–ª": "–ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –∫–æ–∂–∞", "–ó–∞–º—à–∞" –∏ —Ç.–¥.
   - "–¶–≤–µ—Ç–∞": —Å–ø–∏—Å–æ–∫ ["–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π", "–ß—ë—Ä–Ω—ã–π"]
   - "–†–∞–∑–º–µ—Ä—ã": —Å—Ç—Ä–æ–∫–∞ "35, 36, 37, 38"
   - –ü–æ—Ä—è–¥–æ–∫: –ú–∞—Ç–µ—Ä–∏–∞–ª ‚Üí –¶–≤–µ—Ç–∞ ‚Üí –†–∞–∑–º–µ—Ä—ã
   
   üß¥ –ñ–ò–î–ö–û–°–¢–ò / –ú–ê–°–õ–ê / –ö–û–°–ú–ï–¢–ò–ö–ê:
   - "–û–±—ä—ë–º": "100 –º–ª", "250 –º–ª", "1 –ª"
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π "–†–∞–∑–º–µ—Ä—ã" –∏–ª–∏ "–¶–≤–µ—Ç–∞" –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã!
   
   üì± –≠–õ–ï–ö–¢–†–û–ù–ò–ö–ê:
   - –†–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: "–ü—Ä–æ—Ü–µ—Å—Å–æ—Ä", "–ü–∞–º—è—Ç—å", "–ë–∞—Ç–∞—Ä–µ—è"
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π "–†–∞–∑–º–µ—Ä—ã" –∫–∞–∫ –¥–ª—è –æ–¥–µ–∂–¥—ã!
   
   üçΩÔ∏è –ü–û–°–£–î–ê / –¢–û–í–ê–†–´ –î–õ–Ø –î–û–ú–ê:
   - "–ú–∞—Ç–µ—Ä–∏–∞–ª": –µ—Å–ª–∏ –≤–∞–∂–µ–Ω
   - "–†–∞–∑–º–µ—Ä" –∏–ª–∏ "–û–±—ä—ë–º": –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω
   - "–¶–≤–µ—Ç–∞": –µ—Å–ª–∏ –µ—Å—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã
   
   ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û:
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É –µ—Å–ª–∏ –æ–Ω–∞ –ù–ï –£–ö–ê–ó–ê–ù–ê –≤ –¥–∞–Ω–Ω—ã—Ö
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π –ø—É—Å—Ç—ã–µ –ø–æ–ª—è
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π –ø–æ–ª—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ "–Ω–µ —É–∫–∞–∑–∞–Ω", "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ", "–Ω–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏"
   - –ï—Å–ª–∏ –Ω–µ—Ç —Ü–≤–µ—Ç–æ–≤ ‚Üí –ù–ï–¢ –ø–æ–ª—è "–¶–≤–µ—Ç–∞"
   - –ï—Å–ª–∏ –Ω–µ—Ç —Ä–∞–∑–º–µ—Ä–æ–≤ ‚Üí –ù–ï–¢ –ø–æ–ª—è "–†–∞–∑–º–µ—Ä—ã"  
   - –ï—Å–ª–∏ –Ω–µ—Ç –æ–±—ä—ë–º–∞ ‚Üí –ù–ï–¢ –ø–æ–ª—è "–û–±—ä—ë–º"
   - –ï—Å–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π ("–î—Ä—É–≥–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã") ‚Üí –ù–ï–¢ –ø–æ–ª—è –≤–æ–æ–±—â–µ
   - –õ—É—á—à–µ –°–û–í–°–ï–ú –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª–µ, —á–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å "–Ω–µ —É–∫–∞–∑–∞–Ω"
   - –ù–ï –£–ü–û–ú–ò–ù–ê–ô –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≥–æ–¥—ã (2023, 2024 –∏ —Ç.–¥.), —Å–µ–∑–æ–Ω—ã —Å –≥–æ–¥–∞–º–∏ ("–∑–∏–º–∞ 2023") –∏–ª–∏ —Ç–æ—á–Ω—ã–µ –¥–∞—Ç—ã –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞
   
   ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è –ü–ï–†–ï–í–û–î –¶–í–ï–¢–û–í - –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è
   
   –ò–°–ü–û–õ–¨–ó–£–ô –¥–∞–Ω–Ω—ã–µ –∏–∑ "available_colors" –∏ "available_sizes" –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å!
   –¶–≤–µ—Ç–∞ –í–°–ï–ì–î–ê –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –Ω–∞ –†–£–°–°–ö–ò–ô —è–∑—ã–∫! –ü—Ä–∏–º–µ—Ä—ã:
   
   –ê–Ω–≥–ª–∏–π—Å–∫–∏–π ‚Üí –†—É—Å—Å–∫–∏–π:
   - "Black" ‚Üí "–ß—ë—Ä–Ω—ã–π"
   - "White" ‚Üí "–ë–µ–ª—ã–π"  
   - "Red" ‚Üí "–ö—Ä–∞—Å–Ω—ã–π"
   - "MARBLE MUSHROOM PRINT" ‚Üí "–ú—Ä–∞–º–æ—Ä–Ω—ã–π –≥—Ä–∏–±–Ω–æ–π –ø—Ä–∏–Ω—Ç"
   - "CARAMEL GINGERBREAD PRINT" ‚Üí "–ö–∞—Ä–∞–º–µ–ª—å–Ω—ã–π –∏–º–±–∏—Ä–Ω—ã–π –ø—Ä—è–Ω–∏–∫"
   - "WASHED ONYX SKI PRINT" ‚Üí "–°—Ç–∏—Ä–∞–Ω—ã–π —á—ë—Ä–Ω—ã–π –ª—ã–∂–Ω—ã–π –ø—Ä–∏–Ω—Ç"
   
   –ö–∏—Ç–∞–π—Å–∫–∏–π ‚Üí –†—É—Å—Å–∫–∏–π:
   - "ÈªëËâ≤" ‚Üí "–ß—ë—Ä–Ω—ã–π"
   - "ÁôΩËâ≤" ‚Üí "–ë–µ–ª—ã–π"
   - "ÁîúÂ•∂Ê≤πÁ∫¢ËòëËèá" ‚Üí "–°–ª–∞–¥–∫–∏–π –º–æ–ª–æ—á–Ω—ã–π –∫—Ä–∞—Å–Ω—ã–π –≥—Ä–∏–±"
   - "ÁÑ¶Á≥ñÂ∞è‰∫∫ÂÑøÂßúÈ•ºÂπ≤" ‚Üí "–ö–∞—Ä–∞–º–µ–ª—å–Ω—ã–π –∏–º–±–∏—Ä–Ω—ã–π —á–µ–ª–æ–≤–µ—á–µ–∫"
   - "Ê∞¥Ê¥óÈªë" ‚Üí "–°—Ç–∏—Ä–∞–Ω—ã–π —á—ë—Ä–Ω—ã–π"
   
   –ï—Å–ª–∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π + –∫–∏—Ç–∞–π—Å–∫–∏–π –≤–º–µ—Å—Ç–µ:
   - "MARBLE MUSHROOM PRINT ÁîúÂ•∂Ê≤πÁ∫¢ËòëËèá" ‚Üí "–ú—Ä–∞–º–æ—Ä–Ω—ã–π –≥—Ä–∏–±–Ω–æ–π –ø—Ä–∏–Ω—Ç"
   - –ü–µ—Ä–µ–≤–æ–¥–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π, –∏—Å–ø–æ–ª—å–∑—É—è –û–î–ò–ù –ø–µ—Ä–µ–≤–æ–¥ (–Ω–µ –¥—É–±–ª–∏—Ä—É–π!)
   
   –£–±–∏—Ä–∞–π –ª–∏—à–Ω–µ–µ –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–∞:
   - "ÈïøË¢ñ" (–¥–ª–∏–Ω–Ω—ã–π —Ä—É–∫–∞–≤) - –£–ë–†–ê–¢–¨, —ç—Ç–æ –Ω–µ —Ü–≤–µ—Ç!
   - "Áü≠Ë£§" (—à–æ—Ä—Ç—ã) - –£–ë–†–ê–¢–¨, —ç—Ç–æ –Ω–µ —Ü–≤–µ—Ç!
   - "ÈïøË£§" (–¥–ª–∏–Ω–Ω—ã–µ —à—Ç–∞–Ω—ã) - –£–ë–†–ê–¢–¨, —ç—Ç–æ –Ω–µ —Ü–≤–µ—Ç!
   
   –¶–≤–µ—Ç–∞ –≤–æ–∑–≤—Ä–∞—â–∞–π –∫–∞–∫ –°–ü–ò–°–û–ö: ["–ß—ë—Ä–Ω—ã–π", "–ë–µ–ª—ã–π", "–°–µ—Ä—ã–π"]
   –†–∞–∑–º–µ—Ä—ã –≤–æ–∑–≤—Ä–∞—â–∞–π –∫–∞–∫ –°–¢–†–û–ö–£: "S, M, L"

4. **additional_info**: –û–°–¢–ê–í–õ–Ø–ô –ü–£–°–¢–´–ú {{}}
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π "–°–µ–∑–æ–Ω", "–°—Ç–∏–ª—å", "–ì–æ–¥", "–¢—Ä–µ–Ω–¥"
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π –æ–±—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Ç–∏–ø–∞: "–ë—Ä–µ–Ω–¥", "–ê—Ä—Ç–∏–∫—É–ª", "–ö–æ–ª–ª–µ–∫—Ü–∏—è"
   - additional_info –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø—É—Å—Ç—ã–º –æ–±—ä–µ–∫—Ç–æ–º: {{}}

5. **hashtags**: 2-3 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö —Ö—ç—à—Ç–µ–≥–∞ –ë–ï–ó —Å–∏–º–≤–æ–ª–∞ # (–Ω–∞–ø—Ä–∏–º–µ—Ä: ["—Å–≤–∏—Ç–µ—Ä", "–∂–µ–Ω—Å–∫–∞—è–æ–¥–µ–∂–¥–∞"])

6. **emoji**: –û–¥–∏–Ω –ø–æ–¥—Ö–æ–¥—è—â–∏–π —ç–º–æ–¥–∑–∏ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ —Ç–æ–≤–∞—Ä–∞ (üëó –¥–ª—è –æ–¥–µ–∂–¥—ã, üëü –¥–ª—è –æ–±—É–≤–∏, üì± –¥–ª—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏ –∏ —Ç.–¥.)

–ü–†–ò–ú–ï–†–´ –ü–†–ê–í–ò–õ–¨–ù–û–ì–û –û–¢–í–ï–¢–ê:

–ü—Ä–∏–º–µ—Ä 1 (–û–î–ï–ñ–î–ê —Å —Å–æ—Å—Ç–∞–≤–æ–º - –û–ë–†–ê–¢–ò –í–ù–ò–ú–ê–ù–ò–ï –Ω–∞ –ø–µ—Ä–µ–≤–æ–¥ —Ü–≤–µ—Ç–æ–≤!):
{{
  "title": "–ö–æ–º–ø–ª–µ–∫—Ç —Å –ø—Ä–∏–Ω—Ç–æ–º SKIMS",
  "description": "–°—Ç–∏–ª—å–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç –¥–ª—è –¥–æ–º–∞ –∏ –ø—Ä–æ–≥—É–ª–æ–∫ —Å —è—Ä–∫–∏–º–∏ –ø—Ä–∏–Ω—Ç–∞–º–∏. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤–µ—Å–µ–Ω–Ω–µ–π –ø–æ–≥–æ–¥—ã. –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω –∏–∑ –º—è–≥–∫–æ–≥–æ —Ö–ª–æ–ø–∫–∞, –ø—Ä–∏—è—Ç–Ω–æ–≥–æ –∫ —Ç–µ–ª—É.",
  "main_characteristics": {{
    "–°–æ—Å—Ç–∞–≤": "–•–ª–æ–ø–æ–∫",
    "–¶–≤–µ—Ç–∞": ["–ú—Ä–∞–º–æ—Ä–Ω—ã–π –≥—Ä–∏–±–Ω–æ–π –ø—Ä–∏–Ω—Ç", "–ö–∞—Ä–∞–º–µ–ª—å–Ω—ã–π –∏–º–±–∏—Ä–Ω—ã–π –ø—Ä—è–Ω–∏–∫", "–°—Ç–∏—Ä–∞–Ω—ã–π —á—ë—Ä–Ω—ã–π"],
    "–†–∞–∑–º–µ—Ä—ã": "XS, S, M, L, XL"
  }},
  "additional_info": {{}},
  "hashtags": ["–æ–¥–µ–∂–¥–∞", "–∫–æ–º–ø–ª–µ–∫—Ç", "–ø—Ä–∏–Ω—Ç"],
  "emoji": "üëó"
}}

–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ 1:
–ï—Å–ª–∏ –≤ –¥–∞–Ω–Ω—ã—Ö –±—ã–ª–æ:
- "MARBLE MUSHROOM PRINT ÁîúÂ•∂Ê≤πÁ∫¢ËòëËèá ÈïøË¢ñ" ‚Üí –ø–µ—Ä–µ–≤–æ–¥–∏–º –∫–∞–∫ "–ú—Ä–∞–º–æ—Ä–Ω—ã–π –≥—Ä–∏–±–Ω–æ–π –ø—Ä–∏–Ω—Ç"
- "CARAMEL GINGERBREAD PRINT ÁÑ¶Á≥ñÂ∞è‰∫∫ÂÑøÂßúÈ•ºÂπ≤ Áü≠Ë£§" ‚Üí "–ö–∞—Ä–∞–º–µ–ª—å–Ω—ã–π –∏–º–±–∏—Ä–Ω—ã–π –ø—Ä—è–Ω–∏–∫"
- "WASHED ONYX SKI PRINT Ê∞¥Ê¥óÈªë ÈïøË¢ñ" ‚Üí "–°—Ç–∏—Ä–∞–Ω—ã–π —á—ë—Ä–Ω—ã–π –ª—ã–∂–Ω—ã–π –ø—Ä–∏–Ω—Ç"

–ù–ï –û–°–¢–ê–í–õ–Ø–ô –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –∏–ª–∏ –∫–∏—Ç–∞–π—Å–∫–∏–π! –¢–û–õ–¨–ö–û —Ä—É—Å—Å–∫–∏–π –ø–µ—Ä–µ–≤–æ–¥!

–ü—Ä–∏–º–µ—Ä 2 (–û–î–ï–ñ–î–ê –ë–ï–ó —Å–æ—Å—Ç–∞–≤–∞ - –µ—Å–ª–∏ –Ω–µ–∏–∑–≤–µ—Å—Ç–µ–Ω):
{{
  "title": "–°—Ç–∏–ª—å–Ω—ã–π —Å–≤–∏—Ç–µ—Ä",
  "description": "–£—é—Ç–Ω—ã–π —Å–≤–∏—Ç–µ—Ä –¥–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–π –Ω–æ—Å–∫–∏. –ö–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π —Å–≤–æ–±–æ–¥–Ω—ã–π –∫—Ä–æ–π –æ–±–µ—Å–ø–µ—á–∏—Ç —É–¥–æ–±—Å—Ç–≤–æ –≤ –ª—é–±—É—é –ø–æ–≥–æ–¥—É.",
  "main_characteristics": {{
    "–¶–≤–µ—Ç–∞": ["–ß—ë—Ä–Ω—ã–π", "–ë–µ–ª—ã–π", "–°–µ—Ä—ã–π"],
    "–†–∞–∑–º–µ—Ä—ã": "S, M, L"
  }},
  "additional_info": {{}},
  "hashtags": ["—Å–≤–∏—Ç–µ—Ä", "–æ–¥–µ–∂–¥–∞"],
  "emoji": "üëï"
}}

–ü—Ä–∏–º–µ—Ä 3 (–û–ë–£–í–¨):
{{
  "title": "–ö—Ä–æ—Å—Å–æ–≤–∫–∏ –Ω–∞ —Ç–æ–ª—Å—Ç–æ–π –ø–æ–¥–æ—à–≤–µ Ourli",
  "description": "–°—Ç–∏–ª—å–Ω—ã–µ –∂–µ–Ω—Å–∫–∏–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏ –æ—Ç –±—Ä–µ–Ω–¥–∞ Ourli. –£–¥–æ–±–Ω–∞—è –æ–±—É–≤—å —Å –≤—ã—Å–æ–∫–∏–º –≥–æ–ª–µ–Ω–∏—â–µ–º –∏ —Ç–æ–ª—Å—Ç–æ–π –ø–æ–¥–æ—à–≤–æ–π. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Ö–æ–ª–æ–¥–Ω–æ–≥–æ —Å–µ–∑–æ–Ω–∞.",
  "main_characteristics": {{
    "–ú–∞—Ç–µ—Ä–∏–∞–ª": "–ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –∫–æ–∂–∞",
    "–¶–≤–µ—Ç–∞": ["–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π", "–ñ—ë–ª—Ç—ã–π", "–ö–æ—Ä–∏—á–Ω–µ–≤—ã–π —Å –≤–æ—Ä—Å–æ–º", "–ñ—ë–ª—Ç—ã–π —Å –≤–æ—Ä—Å–æ–º"],
    "–†–∞–∑–º–µ—Ä—ã": "35, 36, 37, 38, 39, 40"
  }},
  "additional_info": {{}},
  "hashtags": ["–æ–±—É–≤—å", "–∫—Ä–æ—Å—Å–æ–≤–∫–∏", "—Å—Ç–∏–ª—å–Ω–∞—è–æ–±—É–≤—å"],
  "emoji": "üëü"
}}

–ü—Ä–∏–º–µ—Ä 4 (–ú–ê–°–õ–û / –ñ–ò–î–ö–û–°–¢–¨ - –ë–ï–ó —Ä–∞–∑–º–µ—Ä–æ–≤ –∏ —Ü–≤–µ—Ç–æ–≤!):
{{
  "title": "–û—Ä–≥–∞–Ω–∏—á–µ—Å–∫–æ–µ –º–∞—Å–ª–æ –≥—Ä–µ—Ü–∫–æ–≥–æ –æ—Ä–µ—Ö–∞",
  "description": "–ù–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ –æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–æ–µ –º–∞—Å–ª–æ –≥—Ä–µ—Ü–∫–æ–≥–æ –æ—Ä–µ—Ö–∞ –æ—Ç –±—Ä–µ–Ω–¥–∞ '–î–µ–¥—É—à–∫–∞ –Ω–∞ —Ñ–µ—Ä–º–µ'. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —É—Ö–æ–¥–∞ –∑–∞ –∫–æ–∂–µ–π. –ë–æ–≥–∞—Ç–æ –≤–∏—Ç–∞–º–∏–Ω–∞–º–∏ –∏ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω—ã–º–∏ –≤–µ—â–µ—Å—Ç–≤–∞–º–∏. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—Å–µ–π —Å–µ–º—å–∏.",
  "main_characteristics": {{
    "–û–±—ä—ë–º": "250 –º–ª"
  }},
  "additional_info": {{}},
  "hashtags": ["–º–∞—Å–ª–æ", "–æ—Ä–≥–∞–Ω–∏—á–µ—Å–∫–æ–µ", "—É—Ö–æ–¥"],
  "emoji": "üß¥"
}}

–í–ê–ñ–ù–û –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ 4: –ï—Å–ª–∏ –≤ –¥–∞–Ω–Ω—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–µ –±—Ä–µ–Ω–¥–∞ –Ω–∞ –∫–∏—Ç–∞–π—Å–∫–æ–º (Áà∑Áà∑ÁöÑÂÜúÂú∫), 
–ø–µ—Ä–µ–≤–µ–¥–∏ –µ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π ('–î–µ–¥—É—à–∫–∞ –Ω–∞ —Ñ–µ—Ä–º–µ'). –ù–ï –æ—Å—Ç–∞–≤–ª—è–π –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã!

–ü—Ä–∏–º–µ—Ä 5 (–¢–û–í–ê–† –ë–ï–ó —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫):
{{
  "title": "–î–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–≤–µ—á–∞ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã",
  "description": "–£–Ω–∏–∫–∞–ª—å–Ω–∞—è –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è —Å–≤–µ—á–∞ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –°–æ–∑–¥–∞—ë—Ç —É—é—Ç–Ω—É—é –∞—Ç–º–æ—Å—Ñ–µ—Ä—É –≤ –¥–æ–º–µ. –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –∏–∑ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–≥–æ –≤–æ—Å–∫–∞ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º —ç—Ñ–∏—Ä–Ω—ã—Ö –º–∞—Å–µ–ª.",
  "main_characteristics": {{}},
  "additional_info": {{}},
  "hashtags": ["—Å–≤–µ—á–∞", "–¥–µ–∫–æ—Ä", "—É—é—Ç"],
  "emoji": "üïØÔ∏è"
}}

–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–µ:
{{
  "title": "–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞",
  "product_props": [—Å–ø–∏—Å–æ–∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ —Ç–æ–≤–∞—Ä–∞],
  "available_colors": [—Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ü–≤–µ—Ç–æ–≤ - –ü–ï–†–ï–í–ï–î–ò –Ω–∞ —Ä—É—Å—Å–∫–∏–π!],
  "available_sizes": [—Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤]
}}

–î–∞–Ω–Ω—ã–µ:
{product_data}

‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û - –§–ò–ù–ê–õ–¨–ù–´–ï –ü–†–ê–í–ò–õ–ê ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è

1. –ü–ï–†–ï–í–û–î –ù–ê –†–£–°–°–ö–ò–ô (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!):
   - –í–°–Å –î–û–õ–ñ–ù–û –ë–´–¢–¨ –ù–ê –†–£–°–°–ö–û–ú –Ø–ó–´–ö–ï
   - –ù–∞–∑–≤–∞–Ω–∏—è –±—Ä–µ–Ω–¥–æ–≤: Áà∑Áà∑ÁöÑÂÜúÂú∫ ‚Üí "–î–µ–¥—É—à–∫–∞ –Ω–∞ —Ñ–µ—Ä–º–µ"
   - –¶–í–ï–¢–ê –ø–µ—Ä–µ–≤–æ–¥–∏ –í–°–ï–ì–î–ê:
     * "Black" ‚Üí "–ß—ë—Ä–Ω—ã–π" (–ù–ï "Black"!)
     * "MARBLE MUSHROOM PRINT ÁîúÂ•∂Ê≤πÁ∫¢ËòëËèá ÈïøË¢ñ" ‚Üí "–ú—Ä–∞–º–æ—Ä–Ω—ã–π –≥—Ä–∏–±–Ω–æ–π –ø—Ä–∏–Ω—Ç"
     * –£–±–∏—Ä–∞–π "ÈïøË¢ñ", "Áü≠Ë£§" –∏–∑ –Ω–∞–∑–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–∞ - —ç—Ç–æ –Ω–µ —Ü–≤–µ—Ç!
   - –ù–ï –æ—Å—Ç–∞–≤–ª—è–π –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å–ª–æ–≤–∞ –≤ —Ü–≤–µ—Ç–∞—Ö
   - –ù–ï –æ—Å—Ç–∞–≤–ª—è–π –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã –ù–ò–ì–î–ï
   - –ï—Å–ª–∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏–π + –∫–∏—Ç–∞–π—Å–∫–∏–π ‚Üí –ø–µ—Ä–µ–≤–æ–¥–∏ –û–î–ò–ù —Ä–∞–∑ –Ω–∞ —Ä—É—Å—Å–∫–∏–π

2. –§–û–†–ú–ê–¢:
   - –û—Ç–≤–µ—Ç—å –¢–û–õ–¨–ö–û –≤–∞–ª–∏–¥–Ω—ã–º JSON, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞!
   - –¶–≤–µ—Ç–∞ –í–°–ï–ì–î–ê –∫–∞–∫ —Å–ø–∏—Å–æ–∫: ["–ß—ë—Ä–Ω—ã–π", "–ë–µ–ª—ã–π"]
   - –†–∞–∑–º–µ—Ä—ã/–æ–±—ä—ë–º—ã –í–°–ï–ì–î–ê –∫–∞–∫ —Å—Ç—Ä–æ–∫–∞: "S, M, L"
   - additional_info –í–°–ï–ì–î–ê –ø—É—Å—Ç–æ–π –æ–±—ä–µ–∫—Ç {{}}

3. –ü–û–õ–Ø:
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π –ø–æ–ª—è —Å –ø—É—Å—Ç—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
   - –ù–ï –¥–æ–±–∞–≤–ª—è–π "–Ω–µ —É–∫–∞–∑–∞–Ω", "–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ", "–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö"
   - –î–ª—è –û–î–ï–ñ–î–´: "–°–æ—Å—Ç–∞–≤" (–∞ –ù–ï "–ú–∞—Ç–µ—Ä–∏–∞–ª")
   - –î–ª—è –û–ë–£–í–ò: "–ú–∞—Ç–µ—Ä–∏–∞–ª"
   - –î–ª—è –ñ–ò–î–ö–û–°–¢–ï–ô: "–û–±—ä—ë–º" (–∞ –ù–ï "–†–∞–∑–º–µ—Ä—ã")

4. –û–ü–ò–°–ê–ù–ò–ï:
   - 2-5 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π - –≥–ª–∞–≤–Ω–æ–µ –ü–û–õ–ù–û–¢–ê
   - –í–°–Å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ!

–ü–†–û–í–ï–†–¨ –°–ï–ë–Ø: –í –æ—Ç–≤–µ—Ç–µ –ù–ï–¢ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤? –ù–ï–¢ –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤? –í—Å–µ —Ü–≤–µ—Ç–∞ –Ω–∞ —Ä—É—Å—Å–∫–æ–º? ‚úÖ
"""

        product_info_str = json.dumps(product_data, ensure_ascii=False, indent=2)
        prompt = prompt_template.format(product_data=product_info_str)

        if settings.DEBUG_MODE:
            print(f"[YandexGPT] –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–º–ø—Ç:\n{prompt[:500]}...")

        data = {
            "modelUri": f"gpt://{settings.YANDEX_FOLDER_ID}/{settings.YANDEX_GPT_MODEL}", 
            "completionOptions": {
                "stream": False,
                "temperature": 0.1,  # –°–Ω–∏–∂–µ–Ω–∞ –¥–ª—è –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ–≥–æ —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
                "maxTokens": "2000"
            },
            "messages": [
                {
                    "role": "system",
                    "text": "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –ø–æ—Å—Ç–æ–≤ –≤ Telegram. –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –í–°–Å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ - –Ω–∞–∑–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤, –±—Ä–µ–Ω–¥—ã, –ª—é–±–æ–π —Ç–µ–∫—Å—Ç. –ù–ï –æ—Å—Ç–∞–≤–ª—è–π –∞–Ω–≥–ª–∏–π—Å–∫–∏–µ —Å–ª–æ–≤–∞ –∏–ª–∏ –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã. –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–º JSON."
                },
                {
                    "role": "user",
                    "text": prompt
                }
            ]
        }

        async with httpx.AsyncClient(timeout=60.0) as client:
            response = await client.post(self.base_url, headers=self.headers, json=data)
            response.raise_for_status()
            
            llm_response = response.json()["result"]["alternatives"][0]["message"]["text"]
            
            if settings.DEBUG_MODE:
                print(f"[YandexGPT] –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç:\n{llm_response}")
            
            # –ü–∞—Ä—Å–∏–º JSON –∏–∑ –æ—Ç–≤–µ—Ç–∞
            try:
                # –£–¥–∞–ª—è–µ–º –≤–æ–∑–º–æ–∂–Ω—ã–µ markdown code blocks
                cleaned_response = llm_response.strip()
                if cleaned_response.startswith("```json"):
                    cleaned_response = cleaned_response[7:]
                if cleaned_response.startswith("```"):
                    cleaned_response = cleaned_response[3:]
                if cleaned_response.endswith("```"):
                    cleaned_response = cleaned_response[:-3]
                cleaned_response = cleaned_response.strip()
                
                parsed_json = json.loads(cleaned_response)
                return parsed_json
            except json.JSONDecodeError as e:
                if settings.DEBUG_MODE:
                    print(f"[YandexGPT] –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON: {e}")
                    print(f"[YandexGPT] –û—Ç–≤–µ—Ç LLM: {llm_response}")
                raise ValueError(f"YandexGPT –≤–µ—Ä–Ω—É–ª –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON: {e}")
