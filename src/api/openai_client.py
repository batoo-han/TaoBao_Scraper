import asyncio
import json
import logging
from datetime import datetime
from pathlib import Path
from typing import Iterable

from openai import AsyncOpenAI, OpenAIError

from src.core.config import settings
from src.api.prompts import POST_GENERATION_PROMPT, POSTPROCESS_POST_PROMPT
from src.api.tokens_stats import TokensUsage, calculate_cost
from src.api.openai_pricing import get_effective_pricing

logger = logging.getLogger(__name__)


def _write_boot_debug(title: str, body: str) -> None:
    """
    –ü–∏—à–µ—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–π –ª–æ–≥ –≤ other/boot_debug.log –±–µ–∑ —É—Å–µ—á–µ–Ω–∏–π (—Ç–æ–ª—å–∫–æ –≤ DEBUG_MODE).
    """
    if not getattr(settings, "DEBUG_MODE", False):
        return
    try:
        base_dir = Path(__file__).resolve().parents[2]
        log_path = base_dir / "other" / "boot_debug.log"
        log_path.parent.mkdir(parents=True, exist_ok=True)
        # –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ä–∞–∑–º–µ—Ä debug-–ª–æ–≥–∞, —á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑—Ä–∞—Å—Ç–∞–ª—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ.
        # –ü–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –ø—Ä–æ–µ–∫—Ç–∞: –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ª–æ–≥–æ–≤ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–≤—ã—à–∞—Ç—å ~100 –ú–ë, —Å—Ç–∞—Ä–æ–µ –º–æ–∂–Ω–æ —É–¥–∞–ª—è—Ç—å.
        max_bytes = 100 * 1024 * 1024
        try:
            if log_path.exists() and log_path.stat().st_size > max_bytes:
                rotated = log_path.with_suffix(".log.1")
                # –£–¥–∞–ª—è–µ–º –±–æ–ª–µ–µ —Å—Ç–∞—Ä—É—é —Ä–æ—Ç–∞—Ü–∏—é (–¥–µ—Ä–∂–∏–º –º–∞–∫—Å–∏–º—É–º 2 —Ñ–∞–π–ª–∞: —Ç–µ–∫—É—â–∏–π –∏ .1)
                if rotated.exists():
                    rotated.unlink(missing_ok=True)
                log_path.rename(rotated)
        except Exception:
            # –ï—Å–ª–∏ —Ä–æ—Ç–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å ‚Äî –ª—É—á—à–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å, —á–µ–º –ø–∞–¥–∞—Ç—å
            pass
        with log_path.open("a", encoding="utf-8") as f:
            f.write(f"\n[{datetime.now().isoformat()}] {title}\n")
            f.write(body)
            if not body.endswith("\n"):
                f.write("\n")
            f.write("-" * 80 + "\n")
    except Exception:
        # –ù–µ –ø–∞–¥–∞–µ–º –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å –ª–æ–≥–æ–º
        pass


class OpenAIClient:
    """
    –ö–ª–∏–µ–Ω—Ç –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å OpenAI.
    –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ YandexGPT –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤.
    """

    SYSTEM_PROMPT = (
        "–¢—ã –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è –ø–æ—Å—Ç–æ–≤ –≤ Telegram. "
        "–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –í–°–Å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω–æ –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ - –Ω–∞–∑–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤, –±—Ä–µ–Ω–¥—ã, "
        "–ª—é–±–æ–π —Ç–µ–∫—Å—Ç. –ù–ï –æ—Å—Ç–∞–≤–ª—è–π –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã –ù–ò–ì–î–ï (–≤–∫–ª—é—á–∞—è –±—Ä–µ–Ω–¥/–∞—Ä–æ–º–∞—Ç/—Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏). "
        "–ï—Å–ª–∏ –Ω–µ –º–æ–∂–µ—à—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç ‚Äî –£–î–ê–õ–ò –µ–≥–æ. –í—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –≤–∞–ª–∏–¥–Ω—ã–º JSON."
    )

    # –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –ø—Ä–æ–º–ø—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è OpenAI: —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ —Å–¥–µ–ª–∞–Ω –∫–æ—Ä–æ—á–µ –æ–±—â–µ–≥–æ POST_GENERATION_PROMPT,
    # —á—Ç–æ–±—ã —Å–Ω–∏–∑–∏—Ç—å –≤—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –∏ —É—Å–∫–æ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç—ã, –Ω–µ —Ç–µ—Ä—è—è –∫–ª—é—á–µ–≤—ã—Ö –ø—Ä–∞–≤–∏–ª.
    OPENAI_COMPACT_PROMPT_V1 = """
–¢—ã —Å–æ–∑–¥–∞—ë—à—å –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è Telegram-–ø–æ—Å—Ç–∞ –ø–æ –¥–∞–Ω–Ω—ã–º —Ç–æ–≤–∞—Ä–∞ (JSON).
–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- –ü–∏—à–∏ –¢–û–õ–¨–ö–û –Ω–∞ —Ä—É—Å—Å–∫–æ–º. –ù–∏–∫–∞–∫–∏—Ö –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤ –∏ –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤.
- –ù–µ –≤—ã–¥—É–º—ã–≤–∞–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏. –ò—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
- –ë–µ–∑ ¬´–≤–æ–¥—ã¬ª –∏ –ø—Ä–æ–¥–∞—é—â–∏—Ö —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–æ–∫.
- –ù–µ–ª—å–∑—è —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–ª/–≥–µ–Ω–¥–µ—Ä (–º—É–∂—Å–∫–æ–π, –∂–µ–Ω—Å–∫–∏–π, –¥–ª—è –º—É–∂—á–∏–Ω, –¥–ª—è –∂–µ–Ω—â–∏–Ω –∏ —Ç.–ø.), –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ò–°–ö–õ–Æ–ß–ï–ù–ò–ï: –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å "–¥–ª—è –¥–µ—Ç–µ–π", "–¥–µ—Ç—Å–∫–æ–µ" –∏ —Ç.–ø., –µ—Å–ª–∏ —ç—Ç–æ —É–∫–∞–∑–∞–Ω–æ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –æ–ø–∏—Å–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞.
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –≥–µ–Ω–¥–µ—Ä–Ω—ã–µ/–≤–æ–∑—Ä–∞—Å—Ç–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –≤ –ª—é–±—ã–µ –ø–æ–ª—è, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ "–¶–≤–µ—Ç–∞" –∏ "–†–∞–∑–º–µ—Ä—ã". –ù–µ–ª—å–∑—è: ¬´–¥–ª—è –º–∞–ª—å—á–∏–∫–æ–≤¬ª, ¬´–¥–ª—è –¥–µ–≤–æ—á–µ–∫¬ª, ¬´–º—É–∂—Å–∫–æ–π/–∂–µ–Ω—Å–∫–∏–π¬ª, ¬´—É–Ω–∏—Å–µ–∫—Å¬ª. –ï—Å–ª–∏ —Ç–∞–∫–∏–µ —Ñ—Ä–∞–∑—ã –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤–æ –≤—Ö–æ–¥–µ ‚Äî –£–î–ê–õ–ò –∏—Ö.
- –ù–µ —É–ø–æ–º–∏–Ω–∞–π –∞—Ä—Ç–∏–∫—É–ª—ã, SKU, ID, –∫–æ–¥—ã.
- additional_info –≤—Å–µ–≥–¥–∞ {}.

–í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û JSON (–±–µ–∑ markdown) —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
{
  "title": "–¥–æ 60 —Å–∏–º–≤–æ–ª–æ–≤",
  "description": "2‚Äì4 –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è, –±–µ–∑ –±–∞–Ω–∞–ª—å–Ω–æ—Å—Ç–µ–π",
  "main_characteristics": { "–ù–∞–∑–≤–∞–Ω–∏–µ": "–∑–Ω–∞—á–µ–Ω–∏–µ/—Å–ø–∏—Å–æ–∫" },
  "additional_info": {},
  "hashtags": ["2-3—à—Ç, –æ–¥–Ω–æ —Å–ª–æ–≤–æ, –±–µ–∑ # –∏ –ø—Ä–æ–±–µ–ª–æ–≤. –û—Å–Ω–æ–≤–∞: —Ç–∏–ø —Ç–æ–≤–∞—Ä–∞ + –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª/–∫–ª—é—á–µ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ. –ù–ï –¥–µ—Ç–∞–ª–∏ (–ø—Ä–∏–Ω—Ç—ã, —É–∑–æ—Ä—ã, –±—Ä–µ–Ω–¥—ã). –ò—Å–ø–æ–ª—å–∑—É–π –ø–æ–ª–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è (–ø–æ—Å—Ç–µ–ª—å–Ω–æ–µ–±–µ–ª—å–µ, –∞ –Ω–µ –ø–æ—Å—Ç–µ–ª—å–Ω–æ–µ)."],
  "emoji": "–æ–¥–∏–Ω —ç–º–æ–¥–∑–∏"
}

–ü—Ä–∞–≤–∏–ª–æ –∞–Ω—Ç–∏-–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:
- description = —Ç–æ–ª—å–∫–æ –æ–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è/–æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏/–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –±–µ–∑ –±–∞–Ω–∞–ª—å–Ω–æ—Å—Ç–µ–π).
- main_characteristics = –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞ (—Å–æ—Å—Ç–∞–≤/–º–∞—Ç–µ—Ä–∏–∞–ª/—Ü–≤–µ—Ç–∞/—Ä–∞–∑–º–µ—Ä—ã/–æ–±—ä—ë–º/–∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã).
- –ù–µ –ø–æ–≤—Ç–æ—Ä—è–π –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –≤ description –∏ main_characteristics.

–ï—Å–ª–∏ –≤—Ö–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç available_colors/available_sizes ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –∏—Ö.
–ï—Å–ª–∏ –≤—Ö–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç sku_props/skus ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π –∏—Ö —Ç–æ–ª—å–∫–æ —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã (—Ü–≤–µ—Ç/—Ä–∞–∑–º–µ—Ä/–∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è), –Ω–æ –ù–ï –ø–µ—Ä–µ—á–∏—Å–ª—è–π –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ description.
–ï—Å–ª–∏ –≤—Ö–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç translated_sku_prices ‚Äî –Ω–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π –Ω–æ–≤—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π, –æ–ø–∏—Ä–∞–π—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –Ω–∏—Ö.

–î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞ (JSON):
{product_data}
""".strip()

    # –í–µ—Ä—Å–∏—è v2: –≤—Å—ë –µ—â—ë –∫–æ–º–ø–∞–∫—Ç–Ω–æ, –Ω–æ –∑–∞–º–µ—Ç–Ω–æ —Å—Ç—Ä–æ–∂–µ –∫ ¬´–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏—è–º¬ª –∏ ¬´–≤–æ–¥–µ¬ª.
    # –¶–µ–ª—å: —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∏–∑–∫–∏–µ –≤—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –∏ –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–≤—ã—Å–∏—Ç—å —Ç–æ—á–Ω–æ—Å—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è.
    OPENAI_COMPACT_PROMPT_V2 = """
–¢—ã —Å–æ–∑–¥–∞—ë—à—å –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è Telegram-–ø–æ—Å—Ç–∞ –ø–æ –¥–∞–Ω–Ω—ã–º —Ç–æ–≤–∞—Ä–∞ (JSON).

–ñ–Å–°–¢–ö–ò–ï –ü–†–ê–í–ò–õ–ê (–≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ):
- –ü–∏—à–∏ –¢–û–õ–¨–ö–û –Ω–∞ —Ä—É—Å—Å–∫–æ–º. –ù–∏–∫–∞–∫–∏—Ö –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤ –∏ –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤.
- –ù–ò–ß–ï–ì–û –Ω–µ –≤—ã–¥—É–º—ã–≤–∞–π. –ö–∞–∂–¥–∞—è —Ñ—Ä–∞–∑–∞ –¥–æ–ª–∂–Ω–∞ –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
- –£–±–µ—Ä–∏ ¬´–≤–æ–¥—É¬ª –∏ –æ–±—â–∏–µ —Å–ª–æ–≤–∞ (–º–æ–¥—É–ª—å–Ω—ã–π/—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π/–ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç/–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏ —Ç.–ø.), –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä—è–º–æ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –¥–∞–Ω–Ω—ã–º–∏.
- –ó–∞–ø—Ä–µ—â—ë–Ω –∫–∞–Ω—Ü–µ–ª—è—Ä–∏—Ç/–∫–∞–∑—ë–Ω–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏. –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π —Ñ—Ä–∞–∑—ã (–∏–ª–∏ –∏—Ö –≤–∞—Ä–∏–∞—Ü–∏–∏): ¬´—Ñ–æ—Ä–º–∞—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è¬ª, ¬´–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏¬ª, ¬´–¥–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä¬ª, ¬´–∏–º–µ–µ—Ç –º–µ—Å—Ç–æ¬ª, ¬´–æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è¬ª, ¬´–≤ —Ä–∞–º–∫–∞—Ö¬ª, ¬´–≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ¬ª, ¬´–ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç¬ª, ¬´–∫–∞–∫ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏¬ª, ¬´—Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ¬ª.
- –ù–µ–ª—å–∑—è —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–ª/–≥–µ–Ω–¥–µ—Ä (–º—É–∂—Å–∫–æ–π, –∂–µ–Ω—Å–∫–∏–π, –¥–ª—è –º—É–∂—á–∏–Ω, –¥–ª—è –∂–µ–Ω—â–∏–Ω –∏ —Ç.–ø.), –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ò–°–ö–õ–Æ–ß–ï–ù–ò–ï: –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å "–¥–ª—è –¥–µ—Ç–µ–π", "–¥–µ—Ç—Å–∫–æ–µ" –∏ —Ç.–ø., –µ—Å–ª–∏ —ç—Ç–æ —É–∫–∞–∑–∞–Ω–æ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –æ–ø–∏—Å–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞.
- –ù–µ —É–ø–æ–º–∏–Ω–∞–π –∞—Ä—Ç–∏–∫—É–ª—ã, SKU, ID, –∫–æ–¥—ã.
- –ù–µ –¥–æ–±–∞–≤–ª—è–π –ø–æ–ª—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ ¬´–ø—Ä–æ—á–µ–µ/–¥—Ä—É–≥–æ–µ/other/ÂÖ∂‰ªñ/–Ω–µ —É–∫–∞–∑–∞–Ω/–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö¬ª ‚Äî —Ç–∞–∫–∏–µ –ø–æ–ª—è –Ω—É–∂–Ω–æ –ü–†–û–ü–£–°–¢–ò–¢–¨.
- –ö–†–ò–¢–ò–ß–ï–°–ö–ò: –µ—Å–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª/—Å–æ—Å—Ç–∞–≤ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –æ–±—â–∏–π, –ø–æ–ª–µ "–°–æ—Å—Ç–∞–≤"/"–ú–∞—Ç–µ—Ä–∏–∞–ª" –ù–ï–õ–¨–ó–Ø –¥–æ–±–∞–≤–ª—è—Ç—å. –ó–∞–ø—Ä–µ—â–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏: ¬´—Ç–∫–∞–Ω—å¬ª, ¬´–º–∞—Ç–µ—Ä–∏–∞–ª¬ª, ¬´—Ç–µ–∫—Å—Ç–∏–ª—å¬ª, ¬´–¥—Ä—É–≥–∞—è —Ç–∫–∞–Ω—å¬ª, ¬´–¥—Ä—É–≥–∏–µ —Ç–∫–∞–Ω–∏¬ª, ¬´–ø—Ä–æ—á–∞—è —Ç–∫–∞–Ω—å¬ª, ¬´–∏–Ω–∞—è —Ç–∫–∞–Ω—å¬ª, ¬´–¥—Ä—É–≥–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã¬ª, ¬´–ø—Ä–æ—á–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã¬ª, ¬´—Å–º–µ—Å—å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤¬ª, ¬´–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ¬ª, ¬´–Ω–µ —É–∫–∞–∑–∞–Ω(–æ)¬ª.
- –ù–µ –≤—ã–≤–æ–¥–∏ ¬´–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã¬ª (–∏ –ª—é–±—ã–µ –ø–æ–ª—è –ø—Ä–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã/3C/CQC), –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ.
- –ù–µ –¥–æ–±–∞–≤–ª—è–π ¬´–î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω¬ª –∏ ¬´–í–∞—Ä–∏–∞–Ω—Ç—ã –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤¬ª –∫–∞–∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: —Ü–µ–Ω—ã –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –±—É–¥—É—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã –≤–Ω–µ JSON –≤ –≥–æ—Ç–æ–≤–æ–º –ø–æ—Å—Ç–µ.
- –ù–µ –¥–æ–±–∞–≤–ª—è–π ¬´–ì–∞—Ä–∞–Ω—Ç–∏—è¬ª/¬´–°—Ä–æ–∫ —Å–ª—É–∂–±—ã¬ª –∏ –ª—é–±—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–µ —É—Å–ª–æ–≤–∏—è: —ç—Ç–æ –Ω–µ –≤—ã–≤–æ–¥–∏–º –≤ –ø–æ—Å—Ç–∞—Ö.
- –ù–µ –¥–æ–±–∞–≤–ª—è–π ¬´–ò—Å—Ç–æ—á–Ω–∏–∫¬ª/¬´–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞¬ª/¬´–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å¬ª/¬´–°—Å—ã–ª–∫–∞¬ª: —ç—Ç–æ –Ω–µ –≤—ã–≤–æ–¥–∏–º –≤ –ø–æ—Å—Ç–∞—Ö.
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã price_entries –∏–ª–∏ translated_sku_prices (—Ä–µ–∂–∏–º —Ü–µ–Ω advanced) ‚Äî —ç—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —Å —Ü–µ–Ω–∞–º–∏. –ù–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π –Ω–æ–≤—ã–µ, –Ω–µ —Å—É–º–º–∞—Ä–∏–∑–∏—Ä—É–π –∏—Ö –∏ –Ω–µ –≤—Å—Ç–∞–≤–ª—è–π —Ü–µ–Ω—ã –≤ description/main_characteristics. –≠—Ç–∏ —Ü–µ–Ω—ã –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã —Å–∏—Å—Ç–µ–º–æ–π –æ—Ç–¥–µ–ª—å–Ω–æ; –∏—Å–ø–æ–ª—å–∑—É–π –∏—Ö —Ç–æ–ª—å–∫–æ –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–∞.
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—Ä–∞–∑—ã ¬´–≤ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ¬ª, ¬´–≤ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ: ‚Ä¶¬ª, ¬´–≤ –Ω–∞–ª–∏—á–∏–∏ –≤ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ¬ª –∏ –ª—é–±—ã–µ –≤–∞—Ä–∏–∞—Ü–∏–∏. –í —Ç–µ–∫—Å—Ç–µ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö —Ç–∞–∫–∏–µ –ø–æ–º–µ—Ç–∫–∏ –Ω–µ –Ω—É–∂–Ω—ã.
- –í description –ù–ï–õ–¨–ó–Ø —É–∫–∞–∑—ã–≤–∞—Ç—å –ª—é–±—ã–µ –∏–∑–º–µ—Ä–∏–º—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏ (—Ü–µ–Ω–∞, –æ–±—ä—ë–º, —Ä–∞–∑–º–µ—Ä—ã, –≤–µ—Å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤/–ø—Ä–µ–¥–º–µ—Ç–æ–≤, –¥–∏–∞–ø–∞–∑–æ–Ω—ã). –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ main_characteristics –∏–ª–∏ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–∏—Å—Ç–µ–º–æ–π –Ω–∏–∂–µ.
- –í description –ù–ï –ø–∏—à–∏ —Ü–∏—Ñ—Ä—ã, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —á–∞—Å—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏/—Å–µ—Ä–∏–∏ (–∏ —Ç–æ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–±–µ–≥–∞–π).
- –ù–µ –¥–æ–±–∞–≤–ª—è–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É ¬´–£–ø–∞–∫–æ–≤–∫–∞¬ª, –µ—Å–ª–∏ —ç—Ç–æ –æ–±—ã—á–Ω–∞—è —Ç–æ–≤–∞—Ä–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞ (–∫–æ—Ä–æ–±–∫–∞/–ø–∞–∫–µ—Ç/–∫–∞—Ä—Ç–æ–Ω). –£–ø–∞–∫–æ–≤–∫—É —É–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç —Ç–æ–≤–∞—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–¥–∞—Ä–æ—á–Ω–∞—è –∫–æ—Ä–æ–±–∫–∞-–º–∞—Ç—Ä—ë—à–∫–∞, —Ñ—É—Ç–ª—è—Ä, –∫–µ–π—Å, —Ç–∫–∞–Ω–µ–≤—ã–π –º–µ—à–æ–∫ —Å –≤—ã—à–∏–≤–∫–æ–π).
- –ó–∞–ø—Ä–µ—â–µ–Ω—ã ¬´—Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è¬ª –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏: –Ω–µ –ø–∏—à–∏ —Ñ—Ä–∞–∑—ã –≤–∏–¥–∞ ¬´–æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏‚Ä¶¬ª, ¬´—è–≤–ª—è–µ—Ç—Å—è —Å—É–≤–µ–Ω–∏—Ä–æ–º¬ª, ¬´–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–ª–∏–∑–∫–∏—Ö/—Ä–æ–¥–Ω—ã—Ö/–ø–æ–¥–∞—Ä–∫–∞¬ª –∏ —Ç.–ø., –¥–∞–∂–µ –µ—Å–ª–∏ –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –ø–æ–ª—è –ø—Ä–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏/–∞–¥—Ä–µ—Å–∞—Ç–æ–≤.
- –ù–µ –¥–µ–ª–∞–π –≤—ã–≤–æ–¥ ¬´—Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Å—É–≤–µ–Ω–∏—Ä¬ª/¬´—Å—É–≤–µ–Ω–∏—Ä–Ω—ã–π¬ª –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞.
- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ù–ò–ö–û–ì–î–ê –Ω–µ —É–∫–∞–∑—ã–≤–∞–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞, –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —É—Å–ª–æ–≤–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è. –ó–∞–ø—Ä–µ—â–µ–Ω—ã —Ñ—Ä–∞–∑—ã –≤–∏–¥–∞: ¬´–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è‚Ä¶¬ª, ¬´–¥–ª—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è¬ª, ¬´–¥–ª—è —Ö–æ–ª–æ–¥–Ω–æ–π –ø–æ–≥–æ–¥—ã¬ª, ¬´–¥–ª—è‚Ä¶¬ª, ¬´–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è‚Ä¶¬ª, ¬´–ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è‚Ä¶¬ª, ¬´–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è‚Ä¶¬ª, ¬´–∫–æ–º—É –ø–æ–¥—Ö–æ–¥–∏—Ç¬ª, ¬´–∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å¬ª –∏ —Ç.–ø. –û–ø–∏—Å—ã–≤–∞–π —Ç–æ–≤–∞—Ä —Ç–∞–∫–∏–º, –∫–∞–∫–æ–π –æ–Ω –µ—Å—Ç—å (–º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, —Å–≤–æ–π—Å—Ç–≤–∞), –ë–ï–ó —É–∫–∞–∑–∞–Ω–∏—è –¥–ª—è —á–µ–≥–æ, –∫–æ–º—É –∏ –∫–∞–∫ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º —Ä–µ—à–∞–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä.
- –ï—Å–ª–∏ –µ—Å—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ ¬´–¶–≤–µ—Ç–∞¬ª, –ø–µ—Ä–µ—á–∏—Å–ª—è–π –¢–û–õ–¨–ö–û —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞/—Ü–≤–µ—Ç–æ–≤—ã–µ —Å–æ—á–µ—Ç–∞–Ω–∏—è/–ø—Ä–∏–Ω—Ç—ã. –ò–≥–Ω–æ—Ä–∏—Ä—É–π –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞/–ø–µ—Ä—Å–æ–Ω–∞–∂–∞/—Å–µ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–∫–æ—Ä–µ–π—Å–∫–∞—è –∫—É–∫–ª–∞¬ª).
- –í ¬´–¶–≤–µ—Ç–∞¬ª –ù–ï–õ–¨–ó–Ø –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–∏–ø —Ç–æ–≤–∞—Ä–∞: –Ω–µ–ª—å–∑—è ¬´–≤–µ—Ä–±–ª—é–∂–∏–π –ø–∏–¥–∂–∞–∫/—á—ë—Ä–Ω—ã–µ –±—Ä—é–∫–∏¬ª. –¶–≤–µ—Ç = —Ç–æ–ª—å–∫–æ —Ü–≤–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–≤–µ—Ä–±–ª—é–∂–∏–π¬ª, ¬´—á—ë—Ä–Ω—ã–π¬ª).
- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ù–ò–ö–û–ì–î–ê –Ω–µ –≤–∫–ª—é—á–∞–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∫–æ–¥—ã —Ç–∏–ø–∞ "f0045", "f0047", "d0004", "d0005" –∏–ª–∏ –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ ("d0004+f0045") –≤ –Ω–∞–∑–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤. –ï—Å–ª–∏ —Ü–≤–µ—Ç —É–∫–∞–∑–∞–Ω –∫–∞–∫ "–±–µ–ª—ã–π f0045" - –ø–∏—à–∏ –¢–û–õ–¨–ö–û "–±–µ–ª—ã–π", —É–±–∏—Ä–∞–π –≤—Å–µ –∫–æ–¥—ã!
- –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –≤–∏–¥–µ –∫–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä u?k4, uk?10) ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑—É–π –∏—Ö –≤ ¬´UK4, UK6, ‚Ä¶¬ª –∏ –µ—Å–ª–∏ –∏—Ö –º–Ω–æ–≥–æ ‚Äî —É–∫–∞–∂–∏ –¥–∏–∞–ø–∞–∑–æ–Ω ¬´UK4-UK12¬ª.
- –ö–†–ò–¢–ò–ß–ï–°–ö–ò: –≤ –æ—Ç–≤–µ—Ç–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤. –ï—Å–ª–∏ –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö –µ—Å—Ç—å –∫–∏—Ç–∞–π—Å–∫–∏–π —Ç–µ–∫—Å—Ç ‚Äî –ø–µ—Ä–µ–≤–µ–¥–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π –∏–ª–∏ —É–¥–∞–ª–∏ –ø–æ–ª–µ —Ü–µ–ª–∏–∫–æ–º.
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞—Ç—É/–≤—Ä–µ–º—è –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è/–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞/–ø–∞—Ä—Ç–∏—é/—Å—Ä–æ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω –≤ –Ω–æ—è–±—Ä–µ¬ª, ¬´–¥–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞¬ª, ¬´2024-11¬ª). –ï—Å–ª–∏ –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å —Ç–∞–∫–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–π –∏—Ö.
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–∑–æ–Ω—ã –∏ –≤—Ä–µ–º–µ–Ω–∞ –≥–æ–¥–∞ (–≤–µ—Å–Ω–∞, –ª–µ—Ç–æ, –æ—Å–µ–Ω—å, –∑–∏–º–∞, –æ—Å–µ–Ω–Ω–∏–π, –∑–∏–º–Ω–∏–π –∏ —Ç.–ø.), –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ —É–∫–∞–∑–∞–Ω–æ –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ù–µ –ø–∏—à–∏ —Ñ—Ä–∞–∑—ã –≤–∏–¥–∞ ¬´—Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –æ—Å–µ–Ω—å¬ª, ¬´–¥–ª—è –æ—Å–µ–Ω–∏¬ª, ¬´–æ—Å–µ–Ω–Ω—è—è –∫–æ–ª–ª–µ–∫—Ü–∏—è¬ª –∏ —Ç.–ø.
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤—ã–ø—É—Å–∫–∞, –∑–∞—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–Ω–µ —Å–µ—Ç–µ–≤–æ–π —Ñ–æ—Ä–º–∞—Ç¬ª, ¬´–∑–∞—è–≤–ª–µ–Ω –∫–∞–∫‚Ä¶¬ª, ¬´–≤—ã–ø—É—Å–∫ –∑–∞—è–≤–ª–µ–Ω –∫–∞–∫‚Ä¶¬ª –∏ —Ç.–ø.). –¢–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –æ–ø–∏—Å–∞–Ω–∏—é —Ç–æ–≤–∞—Ä–∞ –∏ –Ω–µ –¥–æ–ª–∂–Ω–∞ —É–ø–æ–º–∏–Ω–∞—Ç—å—Å—è.

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
–í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û JSON (–±–µ–∑ markdown) —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
{
  "title": "–¥–æ 60 —Å–∏–º–≤–æ–ª–æ–≤, –ë–ï–ó –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–π (–±–µ–∑ –¥–≤–æ–µ—Ç–æ—á–∏–π –∏ —Å–ø–∏—Å–∫–æ–≤)",
  "description": "2‚Äì4 –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–¥–æ 640 —Å–∏–º–≤–æ–ª–æ–≤ —Å—É–º–º–∞—Ä–Ω–æ), —Å—É—Ö–æ –∏ –ø–æ –¥–µ–ª—É. –î–æ–±–∞–≤—å 3‚Äì5 –ö–û–ù–ö–†–ï–¢–ù–´–• —Ñ–∞–∫—Ç–æ–≤ –∏–∑ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –û–ø–∏—Å—ã–≤–∞–π —Ç–æ–≤–∞—Ä —Ç–∞–∫–∏–º, –∫–∞–∫–æ–π –æ–Ω –µ—Å—Ç—å (–º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, —Å–≤–æ–π—Å—Ç–≤–∞), –ë–ï–ó —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —É—Å–ª–æ–≤–∏–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.",
  "main_characteristics": { "–ù–∞–∑–≤–∞–Ω–∏–µ": "–∑–Ω–∞—á–µ–Ω–∏–µ/—Å–ø–∏—Å–æ–∫" },
  "additional_info": {},
  "hashtags": ["2-3—à—Ç, –æ–¥–Ω–æ —Å–ª–æ–≤–æ, –±–µ–∑ # –∏ –ø—Ä–æ–±–µ–ª–æ–≤. –û—Å–Ω–æ–≤–∞: —Ç–∏–ø —Ç–æ–≤–∞—Ä–∞ + –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª/–∫–ª—é—á–µ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ. –ù–ï –¥–µ—Ç–∞–ª–∏ (–ø—Ä–∏–Ω—Ç—ã, —É–∑–æ—Ä—ã, –±—Ä–µ–Ω–¥—ã). –ò—Å–ø–æ–ª—å–∑—É–π –ø–æ–ª–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è (–ø–æ—Å—Ç–µ–ª—å–Ω–æ–µ–±–µ–ª—å–µ, –∞ –Ω–µ –ø–æ—Å—Ç–µ–ª—å–Ω–æ–µ)."],
  "emoji": "–æ–¥–∏–Ω —ç–º–æ–¥–∑–∏"
}

–ü—Ä–∞–≤–∏–ª–æ –∞–Ω—Ç–∏-–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:
- description = —Ç–æ–ª—å–∫–æ –æ–±—â–∞—è —Å—É—Ç—å —Ç–æ–≤–∞—Ä–∞ –±–µ–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–ø–∏—Å–∫–æ–º.
- main_characteristics = –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞ (–ø–∏—Ç–∞–Ω–∏–µ/–∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä/–∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è/–∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã).
- –ù–µ –ø–æ–≤—Ç–æ—Ä—è–π –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –≤ description –∏ main_characteristics.

–°–ø–µ—Ü-–ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –æ–¥–µ–∂–¥—ã/–æ–±—É–≤–∏ (–µ—Å–ª–∏ —Ç–æ–≤–∞—Ä ‚Äî –æ–¥–µ–∂–¥–∞ –∏–ª–∏ –æ–±—É–≤—å –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/—Å–≤–æ–π—Å—Ç–≤–∞–º):
- main_characteristics: –°–¢–†–û–ì–û –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:
  - –æ–¥–µ–∂–¥–∞: "–°–æ—Å—Ç–∞–≤", –∑–∞—Ç–µ–º "–¶–≤–µ—Ç–∞", –∑–∞—Ç–µ–º "–†–∞–∑–º–µ—Ä—ã", –∑–∞—Ç–µ–º "–£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º" (–µ—Å–ª–∏ –µ—Å—Ç—å, –¢–û–õ–¨–ö–û –¥–ª—è SZWEGO!)
  - –æ–±—É–≤—å: "–ú–∞—Ç–µ—Ä–∏–∞–ª", –∑–∞—Ç–µ–º "–¶–≤–µ—Ç–∞", –∑–∞—Ç–µ–º "–†–∞–∑–º–µ—Ä—ã", –∑–∞—Ç–µ–º "–£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º" (–µ—Å–ª–∏ –µ—Å—Ç—å, –¢–û–õ–¨–ö–û –¥–ª—è SZWEGO!)
- –ù–∏–∫–∞–∫–∏—Ö –¥—Ä—É–≥–∏—Ö –ø–æ–ª–µ–π (–∑–∞–ø—Ä–µ—â–µ–Ω—ã "–°—Ç–∏–ª—å", "–î–ª–∏–Ω–∞", "–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ" –∏ —Ç.–ø.).
- –ï—Å–ª–∏ –≤ —Ä–∞–∑–º–µ—Ä–∞—Ö —É–∫–∞–∑–∞–Ω –¢–û–õ–¨–ö–û "—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π/one size/ÂùáÁ†Å/–µ–¥–∏–Ω—ã–π —Ä–∞–∑–º–µ—Ä" ‚Äî –ø–æ–ª–µ "–†–∞–∑–º–µ—Ä—ã" –ù–ï –¥–æ–±–∞–≤–ª—è–π.
- –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã —Å–º–µ—à–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π/42-48") ‚Äî —É–±–µ—Ä–∏ "—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π" –∏ –æ—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ "42-48".
- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–º–µ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180), –í–°–ï–ì–î–ê —É–∫–∞–∑—ã–≤–∞–π –¥–∏–∞–ø–∞–∑–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, "80-180"). –ù–ï –ø–µ—Ä–µ—á–∏—Å–ª—è–π —Ä–∞–∑–º–µ—Ä—ã —Å–ø–∏—Å–∫–æ–º —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –∏–ª–∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏. –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã –∏–¥—É—Ç –ø–æ–¥—Ä—è–¥ ‚Äî –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º–∞—Ç "–º–∏–Ω–∏–º—É–º-–º–∞–∫—Å–∏–º—É–º".
- "–£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º": —Å–ø–∏—Å–æ–∫, –¢–û–õ–¨–ö–û –µ—Å–ª–∏:
  * –í –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞ –ø–æ–ª–µ "_platform" —Ä–∞–≤–Ω–æ "szwego" (—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—è–π —ç—Ç–æ —É—Å–ª–æ–≤–∏–µ!)
  * –ò –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –µ—Å—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –≤ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö (–æ–±—Ö–≤–∞—Ç —Ç–∞–ª–∏–∏, –±–µ–¥—Ä–∞, –¥–ª–∏–Ω–∞, —à–∏—Ä–∏–Ω–∞ –∏ —Ç.–ø.)
  –ü—Ä–∏–º–µ—Ä: ["–æ–±—Ö–≤–∞—Ç —Ç–∞–ª–∏–∏ 66-69-72-75 (—Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è)", "–±–µ–¥—Ä–∞ 94-97-100-103", "–¥–ª–∏–Ω–∞ –±—Ä—é–∫ 99-100-101-102"]
  –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ï—Å–ª–∏ –ø–æ–ª–µ "_platform" –ù–ï —Ä–∞–≤–Ω–æ "szwego" - –ù–ï –¥–æ–±–∞–≤–ª—è–π –ø–æ–ª–µ "–£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º" –≤–æ–æ–±—â–µ!
  –ï—Å–ª–∏ –±–ª–æ–∫–∞ "–†–∞–∑–º–µ—Ä—ã" –Ω–µ—Ç, –Ω–æ –µ—Å—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã - –¥–æ–±–∞–≤—å –∏—Ö –≤ "–†–∞–∑–º–µ—Ä—ã" –≤–º–µ—Å—Ç–æ "–£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º".
- –í description –ù–ï —É–ø–æ–º–∏–Ω–∞–π —Å–æ—Å—Ç–∞–≤/–º–∞—Ç–µ—Ä–∏–∞–ª, —Ü–≤–µ—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä—ã (–æ–Ω–∏ —Ç–æ–ª—å–∫–æ –≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö).

–ü—Ä–∞–≤–∏–ª–æ –ø—Ä–æ —Ü–≤–µ—Ç–∞:
- –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ü–≤–µ—Ç–∞/–ø—Ä–∏–Ω—Ç–∞, –ø–æ–ª–æ–∂–∏ –∏—Ö –≤ main_characteristics –∫–ª—é—á–æ–º "–¶–≤–µ—Ç–∞" (—Å–ø–∏—Å–æ–∫).
- –ù–µ –ø–µ—Ä–µ—á–∏—Å–ª—è–π —Ü–≤–µ—Ç–∞ –≤ description.

–ü—Ä–∞–≤–∏–ª–æ –±–µ–∑ –º—É—Å–æ—Ä–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫:
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ ¬´–Ω–µ—Ç¬ª, ¬´–Ω–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ¬ª, ¬´–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç¬ª, ¬´none/n-a¬ª. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ –ù–ï –¥–æ–±–∞–≤–ª—è–π –∫–ª—é—á.

–ü—Ä–∞–≤–∏–ª–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π:
- –ó–Ω–∞—á–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–æ—Å–ª–µ –¥–≤–æ–µ—Ç–æ—á–∏—è –Ω–∞—á–∏–Ω–∞–π —Å–æ —Å—Ç—Ä–æ—á–Ω–æ–π –±—É–∫–≤—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ñ–µ—Å—Ç–∫–æ—Å—Ç—å: –º—è–≥–∫–∞—è", "–°–ø–æ—Å–æ–± –∑–∞–∫—Ä—ã—Ç–∏—è: –º–æ–ª–Ω–∏—è").
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è: –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã —Ä–∞–∑–º–µ—Ä–æ–≤ (S, M, L, XL) –∏ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (30 –º–ª –∏ —Ç.–ø.) –æ—Å—Ç–∞–≤–ª—è–π –∫–∞–∫ –µ—Å—Ç—å.

–ö–∞–∫ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Å–º—ã—Å–ª:
- –ï—Å–ª–∏ –µ—Å—Ç—å sku_props/skus: –∏—Å–ø–æ–ª—å–∑—É–π –∏—Ö, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å —Å–æ—Å—Ç–∞–≤ –Ω–∞–±–æ—Ä–∞ (–∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö). –ú–æ–∂–Ω–æ —É–ø–æ–º—è–Ω—É—Ç—å 2‚Äì4 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (–±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤).
- –ù–µ –¥–µ–ª–∞–π –≤—ã–≤–æ–¥ ¬´–æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ç = ...¬ª, –µ—Å–ª–∏ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞—Ç—Ä–∏–±—É—Ç –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∞–º –∫–æ–º–ø–ª–µ–∫—Ç–∞.
- product_props –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –∫–∞–∫ —Ñ–∞–∫—Ç—ã, –Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–π ¬´–º—É—Å–æ—Ä–Ω—ã–µ¬ª –∑–Ω–∞—á–µ–Ω–∏—è (–ø—Ä–æ—á–µ–µ/ÂÖ∂‰ªñ).

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –æ–±—ä—ë–º—É:
- main_characteristics: –º–∞–∫—Å–∏–º—É–º 4 –∫–ª—é—á–∞.
- –î–ª—è –Ω–∞–±–æ—Ä–æ–≤ —ç–ª–µ–∫—Ç—Ä–æ–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π –û–î–ù–£ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã": –∫–æ—Ä–æ—Ç–∫–∞—è —Å—Ç—Ä–æ–∫–∞/—Å–ø–∏—Å–æ–∫ –∏–∑ 3‚Äì4 —Å–ª–æ–≤ (–±–µ–∑ –º–∞—Ä–∫–µ—Ä–æ–≤ –∏ –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤).
- –£–±–∏—Ä–∞–π –ª—é–±—ã–µ ‚Äú—Å–ª—É–∂–µ–±–Ω—ã–µ‚Äù —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–º–æ–≥–∞—é—Ç –ø–æ–Ω—è—Ç—å —Ç–æ–≤–∞—Ä.

–î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞ (JSON):
{product_data}
""".strip()

    # –í–µ—Ä—Å–∏—è v3: —É—Å–∏–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è compact_v2 —Å –∂—ë—Å—Ç–∫–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø—Ä–æ—Ç–∏–≤ –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤,
    # —É–ª—É—á—à–µ–Ω–Ω–æ–π —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–æ–π –∏ —Ñ–∏–ª–æ–ª–æ–≥–∏–µ–π, –∞ —Ç–∞–∫–∂–µ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å—Ç–∞.
    OPENAI_COMPACT_PROMPT_V3 = """
–¢—ã —Å–æ–∑–¥–∞—ë—à—å –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è Telegram-–ø–æ—Å—Ç–∞ –ø–æ –¥–∞–Ω–Ω—ã–º —Ç–æ–≤–∞—Ä–∞ (JSON).

–ñ–Å–°–¢–ö–ò–ï –ü–†–ê–í–ò–õ–ê (–≤–∞–∂–Ω–µ–µ –≤—Å–µ–≥–æ):
- –ü–∏—à–∏ –¢–û–õ–¨–ö–û –Ω–∞ —Ä—É—Å—Å–∫–æ–º. –ù–∏–∫–∞–∫–∏—Ö –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤ –∏ –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤.
- –ù–ò–ß–ï–ì–û –Ω–µ –≤—ã–¥—É–º—ã–≤–∞–π. –ö–∞–∂–¥–∞—è —Ñ—Ä–∞–∑–∞ –¥–æ–ª–∂–Ω–∞ –æ–ø–∏—Ä–∞—Ç—å—Å—è –Ω–∞ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.
- –£–±–µ—Ä–∏ ¬´–≤–æ–¥—É¬ª –∏ –æ–±—â–∏–µ —Å–ª–æ–≤–∞ (–º–æ–¥—É–ª—å–Ω—ã–π/—É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π/–ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç/–∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏ —Ç.–ø.), –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä—è–º–æ –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –¥–∞–Ω–Ω—ã–º–∏.
- –ó–∞–ø—Ä–µ—â—ë–Ω –∫–∞–Ω—Ü–µ–ª—è—Ä–∏—Ç/–∫–∞–∑—ë–Ω–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏. –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π —Ñ—Ä–∞–∑—ã (–∏–ª–∏ –∏—Ö –≤–∞—Ä–∏–∞—Ü–∏–∏): ¬´—Ñ–æ—Ä–º–∞—Ç –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è¬ª, ¬´–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏¬ª, ¬´–¥–∞–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä¬ª, ¬´–∏–º–µ–µ—Ç –º–µ—Å—Ç–æ¬ª, ¬´–æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è¬ª, ¬´–≤ —Ä–∞–º–∫–∞—Ö¬ª, ¬´–≤—ã–ø–æ–ª–Ω–µ–Ω –≤ —Ñ–æ—Ä–º–∞—Ç–µ¬ª, ¬´–ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç¬ª, ¬´–∫–∞–∫ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏¬ª, ¬´—Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ¬ª.
- –ù–µ–ª—å–∑—è —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ–ª/–≥–µ–Ω–¥–µ—Ä (–º—É–∂—Å–∫–æ–π, –∂–µ–Ω—Å–∫–∏–π, –¥–ª—è –º—É–∂—á–∏–Ω, –¥–ª—è –∂–µ–Ω—â–∏–Ω –∏ —Ç.–ø.), –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ò–°–ö–õ–Æ–ß–ï–ù–ò–ï: –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å "–¥–ª—è –¥–µ—Ç–µ–π", "–¥–µ—Ç—Å–∫–æ–µ" –∏ —Ç.–ø., –µ—Å–ª–∏ —ç—Ç–æ —É–∫–∞–∑–∞–Ω–æ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º –æ–ø–∏—Å–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞.
- –ù–µ —É–ø–æ–º–∏–Ω–∞–π –∞—Ä—Ç–∏–∫—É–ª—ã, SKU, ID, –∫–æ–¥—ã.
- –ù–µ –¥–æ–±–∞–≤–ª—è–π –ø–æ–ª—è —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ ¬´–ø—Ä–æ—á–µ–µ/–¥—Ä—É–≥–æ–µ/other/ÂÖ∂‰ªñ/–Ω–µ —É–∫–∞–∑–∞–Ω/–Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö¬ª ‚Äî —Ç–∞–∫–∏–µ –ø–æ–ª—è –Ω—É–∂–Ω–æ –ü–†–û–ü–£–°–¢–ò–¢–¨.
- –ö–†–ò–¢–ò–ß–ï–°–ö–ò: –µ—Å–ª–∏ –º–∞—Ç–µ—Ä–∏–∞–ª/—Å–æ—Å—Ç–∞–≤ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –∏–ª–∏ —Å–ª–∏—à–∫–æ–º –æ–±—â–∏–π, –ø–æ–ª–µ "–°–æ—Å—Ç–∞–≤"/"–ú–∞—Ç–µ—Ä–∏–∞–ª" –ù–ï–õ–¨–ó–Ø –¥–æ–±–∞–≤–ª—è—Ç—å. –ó–∞–ø—Ä–µ—â–µ–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è –∏ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏: ¬´—Ç–∫–∞–Ω—å¬ª, ¬´–º–∞—Ç–µ—Ä–∏–∞–ª¬ª, ¬´—Ç–µ–∫—Å—Ç–∏–ª—å¬ª, ¬´–¥—Ä—É–≥–∞—è —Ç–∫–∞–Ω—å¬ª, ¬´–¥—Ä—É–≥–∏–µ —Ç–∫–∞–Ω–∏¬ª, ¬´–ø—Ä–æ—á–∞—è —Ç–∫–∞–Ω—å¬ª, ¬´–∏–Ω–∞—è —Ç–∫–∞–Ω—å¬ª, ¬´–¥—Ä—É–≥–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã¬ª, ¬´–ø—Ä–æ—á–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã¬ª, ¬´—Å–º–µ—Å—å –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤¬ª, ¬´–Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ¬ª, ¬´–Ω–µ —É–∫–∞–∑–∞–Ω(–æ)¬ª.
- –ù–µ –≤—ã–≤–æ–¥–∏ ¬´–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã¬ª (–∏ –ª—é–±—ã–µ –ø–æ–ª—è –ø—Ä–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã/3C/CQC), –µ—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ.
- –ù–µ –¥–æ–±–∞–≤–ª—è–π ¬´–î–∏–∞–ø–∞–∑–æ–Ω —Ü–µ–Ω¬ª –∏ ¬´–í–∞—Ä–∏–∞–Ω—Ç—ã –∫–æ–º–ø–ª–µ–∫—Ç–æ–≤¬ª –∫–∞–∫ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏: —Ü–µ–Ω—ã –∏ –≤–∞—Ä–∏–∞–Ω—Ç—ã –±—É–¥—É—Ç –æ—Ñ–æ—Ä–º–ª–µ–Ω—ã –≤–Ω–µ JSON –≤ –≥–æ—Ç–æ–≤–æ–º –ø–æ—Å—Ç–µ.
- –ù–µ –¥–æ–±–∞–≤–ª—è–π ¬´–ì–∞—Ä–∞–Ω—Ç–∏—è¬ª/¬´–°—Ä–æ–∫ —Å–ª—É–∂–±—ã¬ª –∏ –ª—é–±—ã–µ –≥–∞—Ä–∞–Ω—Ç–∏–π–Ω—ã–µ —É—Å–ª–æ–≤–∏—è: —ç—Ç–æ –Ω–µ –≤—ã–≤–æ–¥–∏–º –≤ –ø–æ—Å—Ç–∞—Ö.
- –ù–µ –¥–æ–±–∞–≤–ª—è–π ¬´–ò—Å—Ç–æ—á–Ω–∏–∫¬ª/¬´–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞¬ª/¬´–ú–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å¬ª/¬´–°—Å—ã–ª–∫–∞¬ª: —ç—Ç–æ –Ω–µ –≤—ã–≤–æ–¥–∏–º –≤ –ø–æ—Å—Ç–∞—Ö.
- –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω—ã price_entries –∏–ª–∏ translated_sku_prices (—Ä–µ–∂–∏–º —Ü–µ–Ω advanced) ‚Äî —ç—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤—ã–µ –ø–æ–∑–∏—Ü–∏–∏ —Å —Ü–µ–Ω–∞–º–∏. –ù–µ –ø—Ä–∏–¥—É–º—ã–≤–∞–π –Ω–æ–≤—ã–µ, –Ω–µ —Å—É–º–º–∞—Ä–∏–∑–∏—Ä—É–π –∏—Ö –∏ –Ω–µ –≤—Å—Ç–∞–≤–ª—è–π —Ü–µ–Ω—ã –≤ description/main_characteristics. –≠—Ç–∏ —Ü–µ–Ω—ã –±—É–¥—É—Ç –ø–æ–∫–∞–∑–∞–Ω—ã —Å–∏—Å—Ç–µ–º–æ–π –æ—Ç–¥–µ–ª—å–Ω–æ; –∏—Å–ø–æ–ª—å–∑—É–π –∏—Ö —Ç–æ–ª—å–∫–æ –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–∞.
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—Ä–∞–∑—ã ¬´–≤ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ¬ª, ¬´–≤ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ: ‚Ä¶¬ª, ¬´–≤ –Ω–∞–ª–∏—á–∏–∏ –≤ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–µ¬ª –∏ –ª—é–±—ã–µ –≤–∞—Ä–∏–∞—Ü–∏–∏. –í —Ç–µ–∫—Å—Ç–µ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö —Ç–∞–∫–∏–µ –ø–æ–º–µ—Ç–∫–∏ –Ω–µ –Ω—É–∂–Ω—ã.
- –í description –ù–ï–õ–¨–ó–Ø —É–∫–∞–∑—ã–≤–∞—Ç—å –ª—é–±—ã–µ –∏–∑–º–µ—Ä–∏–º—ã–µ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏ (—Ü–µ–Ω–∞, –æ–±—ä—ë–º, —Ä–∞–∑–º–µ—Ä—ã, –≤–µ—Å, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤/–ø—Ä–µ–¥–º–µ—Ç–æ–≤, –¥–∏–∞–ø–∞–∑–æ–Ω—ã). –≠—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ main_characteristics –∏–ª–∏ –±—É–¥–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–æ —Å–∏—Å—Ç–µ–º–æ–π –Ω–∏–∂–µ.
- –í description –ù–ï –ø–∏—à–∏ —Ü–∏—Ñ—Ä—ã, –µ—Å–ª–∏ —ç—Ç–æ –Ω–µ —á–∞—Å—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ –Ω–∞–∑–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏/—Å–µ—Ä–∏–∏ (–∏ —Ç–æ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–∑–±–µ–≥–∞–π).
- –ù–µ –¥–æ–±–∞–≤–ª—è–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É ¬´–£–ø–∞–∫–æ–≤–∫–∞¬ª, –µ—Å–ª–∏ —ç—Ç–æ –æ–±—ã—á–Ω–∞—è —Ç–æ–≤–∞—Ä–Ω–∞—è —É–ø–∞–∫–æ–≤–∫–∞ (–∫–æ—Ä–æ–±–∫–∞/–ø–∞–∫–µ—Ç/–∫–∞—Ä—Ç–æ–Ω). –£–ø–∞–∫–æ–≤–∫—É —É–∫–∞–∑—ã–≤–∞–π —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –æ–Ω–∞ —Ä–µ–∞–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç —Ç–æ–≤–∞—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–¥–∞—Ä–æ—á–Ω–∞—è –∫–æ—Ä–æ–±–∫–∞-–º–∞—Ç—Ä—ë—à–∫–∞, —Ñ—É—Ç–ª—è—Ä, –∫–µ–π—Å, —Ç–∫–∞–Ω–µ–≤—ã–π –º–µ—à–æ–∫ —Å –≤—ã—à–∏–≤–∫–æ–π).
- –ó–∞–ø—Ä–µ—â–µ–Ω—ã ¬´—Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏—è¬ª –∏ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏: –Ω–µ –ø–∏—à–∏ —Ñ—Ä–∞–∑—ã –≤–∏–¥–∞ ¬´–æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏‚Ä¶¬ª, ¬´—è–≤–ª—è–µ—Ç—Å—è —Å—É–≤–µ–Ω–∏—Ä–æ–º¬ª, ¬´–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–ª–∏–∑–∫–∏—Ö/—Ä–æ–¥–Ω—ã—Ö/–ø–æ–¥–∞—Ä–∫–∞¬ª –∏ —Ç.–ø., –¥–∞–∂–µ –µ—Å–ª–∏ –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å –ø–æ–ª—è –ø—Ä–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏/–∞–¥—Ä–µ—Å–∞—Ç–æ–≤.
- –ù–µ –¥–µ–ª–∞–π –≤—ã–≤–æ–¥ ¬´—Ç—É—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–π —Å—É–≤–µ–Ω–∏—Ä¬ª/¬´—Å—É–≤–µ–Ω–∏—Ä–Ω—ã–π¬ª –±–µ–∑ –ø—Ä—è–º–æ–≥–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ –Ω–∞–∑–≤–∞–Ω–∏–∏ —Ç–æ–≤–∞—Ä–∞.
- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ù–ò–ö–û–ì–î–ê –Ω–µ —É–∫–∞–∑—ã–≤–∞–π –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞, –≤–∞—Ä–∏–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —É—Å–ª–æ–≤–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è. –ó–∞–ø—Ä–µ—â–µ–Ω—ã —Ñ—Ä–∞–∑—ã –≤–∏–¥–∞: ¬´–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è‚Ä¶¬ª, ¬´–¥–ª—è –¥–æ–º–∞—à–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è¬ª, ¬´–¥–ª—è —Ö–æ–ª–æ–¥–Ω–æ–π –ø–æ–≥–æ–¥—ã¬ª, ¬´–¥–ª—è‚Ä¶¬ª, ¬´–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è‚Ä¶¬ª, ¬´–ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è‚Ä¶¬ª, ¬´–ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è‚Ä¶¬ª, ¬´–∫–æ–º—É –ø–æ–¥—Ö–æ–¥–∏—Ç¬ª, ¬´–∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å¬ª –∏ —Ç.–ø. –û–ø–∏—Å—ã–≤–∞–π —Ç–æ–≤–∞—Ä —Ç–∞–∫–∏–º, –∫–∞–∫–æ–π –æ–Ω –µ—Å—Ç—å (–º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, —Å–≤–æ–π—Å—Ç–≤–∞), –ë–ï–ó —É–∫–∞–∑–∞–Ω–∏—è –¥–ª—è —á–µ–≥–æ, –∫–æ–º—É –∏ –∫–∞–∫ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∞–º —Ä–µ—à–∞–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä.
- –ï—Å–ª–∏ –µ—Å—Ç—å —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ ¬´–¶–≤–µ—Ç–∞¬ª, –ø–µ—Ä–µ—á–∏—Å–ª—è–π –¢–û–õ–¨–ö–û —Ä–µ–∞–ª—å–Ω—ã–µ —Ü–≤–µ—Ç–∞/—Ü–≤–µ—Ç–æ–≤—ã–µ —Å–æ—á–µ—Ç–∞–Ω–∏—è/–ø—Ä–∏–Ω—Ç—ã. –ò–≥–Ω–æ—Ä–∏—Ä—É–π –∑–Ω–∞—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–≥–ª—è–¥—è—Ç –∫–∞–∫ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞/–ø–µ—Ä—Å–æ–Ω–∞–∂–∞/—Å–µ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–∫–æ—Ä–µ–π—Å–∫–∞—è –∫—É–∫–ª–∞¬ª).
- –í ¬´–¶–≤–µ—Ç–∞¬ª –ù–ï–õ–¨–ó–Ø –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–∏–ø —Ç–æ–≤–∞—Ä–∞: –Ω–µ–ª—å–∑—è ¬´–≤–µ—Ä–±–ª—é–∂–∏–π –ø–∏–¥–∂–∞–∫/—á—ë—Ä–Ω—ã–µ –±—Ä—é–∫–∏¬ª. –¶–≤–µ—Ç = —Ç–æ–ª—å–∫–æ —Ü–≤–µ—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–≤–µ—Ä–±–ª—é–∂–∏–π¬ª, ¬´—á—ë—Ä–Ω—ã–π¬ª).
- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ù–ò–ö–û–ì–î–ê –Ω–µ –≤–∫–ª—é—á–∞–π —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∫–æ–¥—ã —Ç–∏–ø–∞ "f0045", "f0047", "d0004", "d0005" –∏–ª–∏ –∏—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ ("d0004+f0045") –≤ –Ω–∞–∑–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤. –ï—Å–ª–∏ —Ü–≤–µ—Ç —É–∫–∞–∑–∞–Ω –∫–∞–∫ "–±–µ–ª—ã–π f0045" - –ø–∏—à–∏ –¢–û–õ–¨–ö–û "–±–µ–ª—ã–π", —É–±–∏—Ä–∞–π –≤—Å–µ –∫–æ–¥—ã!
- –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –≤ –≤–∏–¥–µ –∫–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä u?k4, uk?10) ‚Äî –Ω–æ—Ä–º–∞–ª–∏–∑—É–π –∏—Ö –≤ ¬´UK4, UK6, ‚Ä¶¬ª –∏ –µ—Å–ª–∏ –∏—Ö –º–Ω–æ–≥–æ ‚Äî —É–∫–∞–∂–∏ –¥–∏–∞–ø–∞–∑–æ–Ω ¬´UK4-UK12¬ª.
- –ö–†–ò–¢–ò–ß–ï–°–ö–ò: –≤ –æ—Ç–≤–µ—Ç–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤. –ï—Å–ª–∏ –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è—Ö –µ—Å—Ç—å –∫–∏—Ç–∞–π—Å–∫–∏–π —Ç–µ–∫—Å—Ç ‚Äî –ø–µ—Ä–µ–≤–µ–¥–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π –∏–ª–∏ —É–¥–∞–ª–∏ –ø–æ–ª–µ —Ü–µ–ª–∏–∫–æ–º.
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –¥–∞—Ç—É/–≤—Ä–µ–º—è –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è/–ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞/–ø–∞—Ä—Ç–∏—é/—Å—Ä–æ–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–ø—Ä–æ–∏–∑–≤–µ–¥—ë–Ω –≤ –Ω–æ—è–±—Ä–µ¬ª, ¬´–¥–∞—Ç–∞ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞¬ª, ¬´2024-11¬ª). –ï—Å–ª–∏ –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –µ—Å—Ç—å —Ç–∞–∫–∏–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã ‚Äî –∏–≥–Ω–æ—Ä–∏—Ä—É–π –∏—Ö.
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Å–µ–∑–æ–Ω—ã –∏ –≤—Ä–µ–º–µ–Ω–∞ –≥–æ–¥–∞ (–≤–µ—Å–Ω–∞, –ª–µ—Ç–æ, –æ—Å–µ–Ω—å, –∑–∏–º–∞, –æ—Å–µ–Ω–Ω–∏–π, –∑–∏–º–Ω–∏–π –∏ —Ç.–ø.), –¥–∞–∂–µ –µ—Å–ª–∏ —ç—Ç–æ —É–∫–∞–∑–∞–Ω–æ –≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ù–µ –ø–∏—à–∏ —Ñ—Ä–∞–∑—ã –≤–∏–¥–∞ ¬´—Å–µ–∑–æ–Ω–Ω–æ—Å—Ç—å –æ—Å–µ–Ω—å¬ª, ¬´–¥–ª—è –æ—Å–µ–Ω–∏¬ª, ¬´–æ—Å–µ–Ω–Ω—è—è –∫–æ–ª–ª–µ–∫—Ü–∏—è¬ª –∏ —Ç.–ø.
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤—ã–ø—É—Å–∫–∞, –∑–∞—è–≤–ª–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–Ω–µ —Å–µ—Ç–µ–≤–æ–π —Ñ–æ—Ä–º–∞—Ç¬ª, ¬´–∑–∞—è–≤–ª–µ–Ω –∫–∞–∫‚Ä¶¬ª, ¬´–≤—ã–ø—É—Å–∫ –∑–∞—è–≤–ª–µ–Ω –∫–∞–∫‚Ä¶¬ª –∏ —Ç.–ø.). –¢–∞–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –æ–ø–∏—Å–∞–Ω–∏—é —Ç–æ–≤–∞—Ä–∞ –∏ –Ω–µ –¥–æ–ª–∂–Ω–∞ —É–ø–æ–º–∏–Ω–∞—Ç—å—Å—è.

‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ë–û–†–¨–ë–ê –° –ö–ò–¢–ê–ô–°–ö–ò–ú–ò –ò–ï–†–û–ì–õ–ò–§–ê–ú–ò ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è
- –í–°–ï –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã (–≤–∫–ª—é—á–∞—è —É–ø—Ä–æ—â—ë–Ω–Ω—ã–µ –∏ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–µ) –î–û–õ–ñ–ù–´ –±—ã—Ç—å –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫.
- –ï—Å–ª–∏ –≤—Å—Ç—Ä–µ—á–∞–µ—à—å –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã –≤ —Ü–≤–µ—Ç–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä: Â≠îÈõÄÁªø, ÈªëËâ≤, ÁôΩËâ≤, Á∫¢Ëâ≤) ‚Äî –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–≤–µ–¥–∏ –∏—Ö:
  * Â≠îÈõÄÁªø ‚Üí "–ø–∞–≤–ª–∏–Ω–∏–π –∑–µ–ª—ë–Ω—ã–π" –∏–ª–∏ "–∏–∑—É–º—Ä—É–¥–Ω—ã–π"
  * ÈªëËâ≤ ‚Üí "—á—ë—Ä–Ω—ã–π"
  * ÁôΩËâ≤ ‚Üí "–±–µ–ª—ã–π"
  * Á∫¢Ëâ≤ ‚Üí "–∫—Ä–∞—Å–Ω—ã–π"
  * ËìùËâ≤ ‚Üí "—Å–∏–Ω–∏–π"
  * ÁªøËâ≤ ‚Üí "–∑–µ–ª—ë–Ω—ã–π"
  * ÈªÑËâ≤ ‚Üí "–∂—ë–ª—Ç—ã–π"
  * ÁÅ∞Ëâ≤ ‚Üí "—Å–µ—Ä—ã–π"
  * Á¥´Ëâ≤ ‚Üí "—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π"
  * Á≤âËâ≤ ‚Üí "—Ä–æ–∑–æ–≤—ã–π"
  * Ê£ïËâ≤ ‚Üí "–∫–æ—Ä–∏—á–Ω–µ–≤—ã–π"
  * Ê©ôËâ≤ ‚Üí "–æ—Ä–∞–Ω–∂–µ–≤—ã–π"
- –ï—Å–ª–∏ –≤—Å—Ç—Ä–µ—á–∞–µ—à—å –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö/–æ–ø–∏—Å–∞–Ω–∏—è—Ö ‚Äî –ø–µ—Ä–µ–≤–µ–¥–∏ –∏—Ö –Ω–∞ —Ä—É—Å—Å–∫–∏–π –∏–ª–∏ —É–¥–∞–ª–∏ –ø–æ–ª–µ —Ü–µ–ª–∏–∫–æ–º, –µ—Å–ª–∏ –ø–µ—Ä–µ–≤–æ–¥ –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω.
- –ï—Å–ª–∏ –≤—Å—Ç—Ä–µ—á–∞–µ—à—å –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã –≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö ‚Äî –ø–µ—Ä–µ–≤–µ–¥–∏ –∑–Ω–∞—á–µ–Ω–∏–µ –Ω–∞ —Ä—É—Å—Å–∫–∏–π –∏–ª–∏ —É–¥–∞–ª–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É.
- –ù–ò–ö–û–ì–î–ê –Ω–µ –æ—Å—Ç–∞–≤–ª—è–π –∫–∏—Ç–∞–π—Å–∫–∏–µ –∏–µ—Ä–æ–≥–ª–∏—Ñ—ã –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –æ—Ç–≤–µ—Ç–µ. –≠—Ç–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞!
- –ü—Ä–∏–º–µ—Ä—ã –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ì–û –æ—Ç–≤–µ—Ç–∞:
  * "–¶–≤–µ—Ç–∞": ["Â≠îÈõÄÁªø", "—Å–∏–Ω–∏–π"] ‚ùå
  * "description": "–ö–æ–º–ø–ª–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–π –∫–∞—Ä–¥–∏–≥–∞–Ω ÈïøË¢ñ" ‚ùå
- –ü—Ä–∏–º–µ—Ä—ã –ü–†–ê–í–ò–õ–¨–ù–û–ì–û –æ—Ç–≤–µ—Ç–∞:
  * "–¶–≤–µ—Ç–∞": ["–ø–∞–≤–ª–∏–Ω–∏–π –∑–µ–ª—ë–Ω—ã–π", "—Å–∏–Ω–∏–π"] ‚úÖ
  * "description": "–ö–æ–º–ø–ª–µ–∫—Ç –≤–∫–ª—é—á–∞–µ—Ç –¥–ª–∏–Ω–Ω—ã–π –∫–∞—Ä–¥–∏–≥–∞–Ω —Å –¥–ª–∏–Ω–Ω—ã–º–∏ —Ä—É–∫–∞–≤–∞–º–∏" ‚úÖ

‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –°–¢–ò–õ–ò–°–¢–ò–ö–ê –ò –§–ò–õ–û–õ–û–ì–ò–Ø ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ:
  * –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: "–¢—Ä–∏ —Ç—Ä—É—Å–∞", "–î–≤–∞ –Ω–æ—Å–∫–∞", "–ü—è—Ç—å –ø–µ—Ä—á–∞—Ç–æ–∫" ‚ùå
  * –ü–†–ê–í–ò–õ–¨–ù–û: "–ù–∞–±–æ—Ä –∏–∑ —Ç—Ä—ë—Ö —Ç—Ä—É—Å–æ–≤", "–î–≤–µ –ø–∞—Ä—ã –Ω–æ—Å–∫–æ–≤", "–ü—è—Ç—å –ø–∞—Ä –ø–µ—Ä—á–∞—Ç–æ–∫", "–ö–æ–º–ø–ª–µ–∫—Ç –∏–∑ —Ç—Ä—ë—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤" ‚úÖ
  * –î–ª—è –ø–∞—Ä–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (–Ω–æ—Å–∫–∏, –ø–µ—Ä—á–∞—Ç–∫–∏, –≤–∞—Ä–µ–∂–∫–∏) –í–°–ï–ì–î–ê –∏—Å–ø–æ–ª—å–∑—É–π "–ø–∞—Ä–∞/–ø–∞—Ä—ã"
  * –î–ª—è –Ω–∞–±–æ—Ä–æ–≤/–∫–æ–º–ø–ª–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π "–Ω–∞–±–æ—Ä –∏–∑ N –ø—Ä–µ–¥–º–µ—Ç–æ–≤" –∏–ª–∏ "–∫–æ–º–ø–ª–µ–∫—Ç –∏–∑ N —ç–ª–µ–º–µ–Ω—Ç–æ–≤"
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø–æ —Ä–æ–¥—É, —á–∏—Å–ª—É –∏ –ø–∞–¥–µ–∂—É:
  * –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: "–ö–∞—Ä–¥–∏–≥–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω –∏–∑ –ø–æ–ª–∏—ç—Å—Ç–µ—Ä", "–¢—Ä—É—Å—ã –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∏–∑ —Ö–ª–æ–ø–æ–∫" ‚ùå
  * –ü–†–ê–í–ò–õ–¨–ù–û: "–ö–∞—Ä–¥–∏–≥–∞–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω –∏–∑ –ø–æ–ª–∏—ç—Å—Ç–µ—Ä–∞", "–¢—Ä—É—Å—ã –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω—ã –∏–∑ —Ö–ª–æ–ø–∫–∞" ‚úÖ
  * –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: "–†–∞–∑–º–µ—Ä—ã: 18.12, —Å–º", "–†–∞–∑–º–µ—Ä—ã: 21, 13, —Å–º", "–†–∞–∑–º–µ—Ä—ã: –ø—Ä–∏–º–µ—Ä–Ω–æ, 17, —Å–º, 26, —Å–º" ‚ùå
  * –ü–†–ê–í–ò–õ–¨–ù–û: "–†–∞–∑–º–µ—Ä—ã: 18 √ó 12 —Å–º", "–†–∞–∑–º–µ—Ä—ã: 21 √ó 13 —Å–º", "–†–∞–∑–º–µ—Ä—ã: –ø—Ä–∏–º–µ—Ä–Ω–æ 17 √ó 26 —Å–º" ‚úÖ
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤:
  * –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã —É–∫–∞–∑–∞–Ω—ã –∫–∞–∫ –¥–≤–∞ —á–∏—Å–ª–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä "18, 12" –∏–ª–∏ "18.12") ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π –∫–∞–∫ "18 √ó 12 —Å–º"
  * –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã —É–∫–∞–∑–∞–Ω—ã –∫–∞–∫ —Ç—Ä–∏ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä "21, 13, 5") ‚Äî —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–π –∫–∞–∫ "21 √ó 13 √ó 5 —Å–º"
  * –£–±–∏—Ä–∞–π –ª–∏—à–Ω–∏–µ –∑–∞–ø—è—Ç—ã–µ –∏ –ø—Ä–æ–±–µ–ª—ã –≤–æ–∫—Ä—É–≥ –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è
  * –ò—Å–ø–æ–ª—å–∑—É–π —Å–∏–º–≤–æ–ª "√ó" (–Ω–µ "x" –∏ –Ω–µ "X") –¥–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤
- –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–≥–æ–≤ –∏ –ø–∞–¥–µ–∂–µ–π:
  * –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: "–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω –∏–∑ —Ö–ª–æ–ø–æ–∫", "–í—ã–ø–æ–ª–Ω–µ–Ω –∏–∑ –ø–æ–ª–∏—ç—Å—Ç–µ—Ä" ‚ùå
  * –ü–†–ê–í–ò–õ–¨–ù–û: "–ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω –∏–∑ —Ö–ª–æ–ø–∫–∞", "–í—ã–ø–æ–ª–Ω–µ–Ω –∏–∑ –ø–æ–ª–∏—ç—Å—Ç–µ—Ä–∞" ‚úÖ
- –ò–∑–±–µ–≥–∞–π —Ç–∞–≤—Ç–æ–ª–æ–≥–∏–π –∏ –ø–æ–≤—Ç–æ—Ä–æ–≤:
  * –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: "–¢—Ä—É—Å—ã —Ç—Ä—É—Å—ã", "–ö–∞—Ä–¥–∏–≥–∞–Ω –∫–∞—Ä–¥–∏–≥–∞–Ω" ‚ùå
  * –ü–†–ê–í–ò–õ–¨–ù–û: "–¢—Ä—É—Å—ã", "–ö–∞—Ä–¥–∏–≥–∞–Ω" ‚úÖ

–§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞:
–í–µ—Ä–Ω–∏ –¢–û–õ–¨–ö–û JSON (–±–µ–∑ markdown) —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π:
{
  "title": "–¥–æ 60 —Å–∏–º–≤–æ–ª–æ–≤, –ë–ï–ó –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–π (–±–µ–∑ –¥–≤–æ–µ—Ç–æ—á–∏–π –∏ —Å–ø–∏—Å–∫–æ–≤)",
  "description": "2‚Äì4 –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (–¥–æ 640 —Å–∏–º–≤–æ–ª–æ–≤ —Å—É–º–º–∞—Ä–Ω–æ), —Å—É—Ö–æ –∏ –ø–æ –¥–µ–ª—É. –î–æ–±–∞–≤—å 3‚Äì5 –ö–û–ù–ö–†–ï–¢–ù–´–• —Ñ–∞–∫—Ç–æ–≤ –∏–∑ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –û–ø–∏—Å—ã–≤–∞–π —Ç–æ–≤–∞—Ä —Ç–∞–∫–∏–º, –∫–∞–∫–æ–π –æ–Ω –µ—Å—Ç—å (–º–∞—Ç–µ—Ä–∏–∞–ª—ã, –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, —Å–≤–æ–π—Å—Ç–≤–∞), –ë–ï–ó —É–∫–∞–∑–∞–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è, –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ —É—Å–ª–æ–≤–∏–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è. –í–°–Å –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ, –ë–ï–ó –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö —Å–ª–æ–≤.",
  "main_characteristics": { "–ù–∞–∑–≤–∞–Ω–∏–µ": "–∑–Ω–∞—á–µ–Ω–∏–µ/—Å–ø–∏—Å–æ–∫" },
  "additional_info": {},
  "hashtags": ["2-3—à—Ç, –æ–¥–Ω–æ —Å–ª–æ–≤–æ, –±–µ–∑ # –∏ –ø—Ä–æ–±–µ–ª–æ–≤. –û—Å–Ω–æ–≤–∞: —Ç–∏–ø —Ç–æ–≤–∞—Ä–∞ + –æ—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª/–∫–ª—é—á–µ–≤–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ. –ù–ï –¥–µ—Ç–∞–ª–∏ (–ø—Ä–∏–Ω—Ç—ã, —É–∑–æ—Ä—ã, –±—Ä–µ–Ω–¥—ã). –ò—Å–ø–æ–ª—å–∑—É–π –ø–æ–ª–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è (–ø–æ—Å—Ç–µ–ª—å–Ω–æ–µ–±–µ–ª—å–µ, –∞ –Ω–µ –ø–æ—Å—Ç–µ–ª—å–Ω–æ–µ)."],
  "emoji": "–æ–¥–∏–Ω —ç–º–æ–¥–∑–∏"
}

–ü—Ä–∞–≤–∏–ª–æ –∞–Ω—Ç–∏-–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:
- description = —Ç–æ–ª—å–∫–æ –æ–±—â–∞—è —Å—É—Ç—å —Ç–æ–≤–∞—Ä–∞ –±–µ–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–ø–∏—Å–∫–æ–º.
- main_characteristics = –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞ (–ø–∏—Ç–∞–Ω–∏–µ/–∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä/–∫–æ–º–ø–ª–µ–∫—Ç–∞—Ü–∏—è/–∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã).
- –ù–µ –ø–æ–≤—Ç–æ—Ä—è–π –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ –≤ description –∏ main_characteristics.

–°–ø–µ—Ü-–ø—Ä–∞–≤–∏–ª–æ –¥–ª—è –æ–¥–µ–∂–¥—ã/–æ–±—É–≤–∏ (–µ—Å–ª–∏ —Ç–æ–≤–∞—Ä ‚Äî –æ–¥–µ–∂–¥–∞ –∏–ª–∏ –æ–±—É–≤—å –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é/—Å–≤–æ–π—Å—Ç–≤–∞–º):
- main_characteristics: –°–¢–†–û–ì–û –≤ —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Ä—è–¥–∫–µ:
  - –æ–¥–µ–∂–¥–∞: "–°–æ—Å—Ç–∞–≤", –∑–∞—Ç–µ–º "–¶–≤–µ—Ç–∞", –∑–∞—Ç–µ–º "–†–∞–∑–º–µ—Ä—ã", –∑–∞—Ç–µ–º "–£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º" (–µ—Å–ª–∏ –µ—Å—Ç—å, –¢–û–õ–¨–ö–û –¥–ª—è SZWEGO!)
  - –æ–±—É–≤—å: "–ú–∞—Ç–µ—Ä–∏–∞–ª", –∑–∞—Ç–µ–º "–¶–≤–µ—Ç–∞", –∑–∞—Ç–µ–º "–†–∞–∑–º–µ—Ä—ã", –∑–∞—Ç–µ–º "–£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º" (–µ—Å–ª–∏ –µ—Å—Ç—å, –¢–û–õ–¨–ö–û –¥–ª—è SZWEGO!)
- –ù–∏–∫–∞–∫–∏—Ö –¥—Ä—É–≥–∏—Ö –ø–æ–ª–µ–π (–∑–∞–ø—Ä–µ—â–µ–Ω—ã "–°—Ç–∏–ª—å", "–î–ª–∏–Ω–∞", "–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ" –∏ —Ç.–ø.).
- –ï—Å–ª–∏ –≤ —Ä–∞–∑–º–µ—Ä–∞—Ö —É–∫–∞–∑–∞–Ω –¢–û–õ–¨–ö–û "—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π/one size/ÂùáÁ†Å/–µ–¥–∏–Ω—ã–π —Ä–∞–∑–º–µ—Ä" ‚Äî –ø–æ–ª–µ "–†–∞–∑–º–µ—Ä—ã" –ù–ï –¥–æ–±–∞–≤–ª—è–π.
- –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã —Å–º–µ—à–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π/42-48") ‚Äî —É–±–µ—Ä–∏ "—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π" –∏ –æ—Å—Ç–∞–≤—å —Ç–æ–ª—å–∫–æ "42-48".
- –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–º–µ—Ä–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 80, 90, 100, 110, 120, 130, 140, 150, 160, 170, 180), –í–°–ï–ì–î–ê —É–∫–∞–∑—ã–≤–∞–π –¥–∏–∞–ø–∞–∑–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, "80-180"). –ù–ï –ø–µ—Ä–µ—á–∏—Å–ª—è–π —Ä–∞–∑–º–µ—Ä—ã —Å–ø–∏—Å–∫–æ–º —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –∏–ª–∏ –º–∞—Ä–∫–µ—Ä–∞–º–∏. –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä—ã –∏–¥—É—Ç –ø–æ–¥—Ä—è–¥ ‚Äî –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π —Ñ–æ—Ä–º–∞—Ç "–º–∏–Ω–∏–º—É–º-–º–∞–∫—Å–∏–º—É–º".
- "–£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º": —Å–ø–∏—Å–æ–∫, –¢–û–õ–¨–ö–û –µ—Å–ª–∏:
  * –í –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞ –ø–æ–ª–µ "_platform" —Ä–∞–≤–Ω–æ "szwego" (—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—è–π —ç—Ç–æ —É—Å–ª–æ–≤–∏–µ!)
  * –ò –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –µ—Å—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –≤ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö (–æ–±—Ö–≤–∞—Ç —Ç–∞–ª–∏–∏, –±–µ–¥—Ä–∞, –¥–ª–∏–Ω–∞, —à–∏—Ä–∏–Ω–∞ –∏ —Ç.–ø.)
  –ü—Ä–∏–º–µ—Ä: ["–æ–±—Ö–≤–∞—Ç —Ç–∞–ª–∏–∏ 66-69-72-75 (—Ä–∞—Å—Ç—è–≥–∏–≤–∞–µ—Ç—Å—è)", "–±–µ–¥—Ä–∞ 94-97-100-103", "–¥–ª–∏–Ω–∞ –±—Ä—é–∫ 99-100-101-102"]
  –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û: –ï—Å–ª–∏ –ø–æ–ª–µ "_platform" –ù–ï —Ä–∞–≤–Ω–æ "szwego" - –ù–ï –¥–æ–±–∞–≤–ª—è–π –ø–æ–ª–µ "–£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º" –≤–æ–æ–±—â–µ!
  –ï—Å–ª–∏ –±–ª–æ–∫–∞ "–†–∞–∑–º–µ—Ä—ã" –Ω–µ—Ç, –Ω–æ –µ—Å—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã - –¥–æ–±–∞–≤—å –∏—Ö –≤ "–†–∞–∑–º–µ—Ä—ã" –≤–º–µ—Å—Ç–æ "–£—Ç–æ—á–Ω–µ–Ω–∏—è –ø–æ —Ä–∞–∑–º–µ—Ä–∞–º".
- –í description –ù–ï —É–ø–æ–º–∏–Ω–∞–π —Å–æ—Å—Ç–∞–≤/–º–∞—Ç–µ—Ä–∏–∞–ª, —Ü–≤–µ—Ç–∞ –∏ —Ä–∞–∑–º–µ—Ä—ã (–æ–Ω–∏ —Ç–æ–ª—å–∫–æ –≤ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö).

–ü—Ä–∞–≤–∏–ª–æ –ø—Ä–æ —Ü–≤–µ—Ç–∞:
- –ï—Å–ª–∏ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ü–≤–µ—Ç–∞/–ø—Ä–∏–Ω—Ç–∞, –ø–æ–ª–æ–∂–∏ –∏—Ö –≤ main_characteristics –∫–ª—é—á–æ–º "–¶–≤–µ—Ç–∞" (—Å–ø–∏—Å–æ–∫).
- –ù–µ –ø–µ—Ä–µ—á–∏—Å–ª—è–π —Ü–≤–µ—Ç–∞ –≤ description.
- –í–°–ï–ì–î–ê –ø–µ—Ä–µ–≤–æ–¥–∏ –∫–∏—Ç–∞–π—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤ –Ω–∞ —Ä—É—Å—Å–∫–∏–π (—Å–º. —Ç–∞–±–ª–∏—Ü—É –ø–µ—Ä–µ–≤–æ–¥–æ–≤ –≤—ã—à–µ).
- –ï—Å–ª–∏ —Ü–≤–µ—Ç —É–∫–∞–∑–∞–Ω –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º ‚Äî –ø–µ—Ä–µ–≤–µ–¥–∏ –Ω–∞ —Ä—É—Å—Å–∫–∏–π (Black ‚Üí "—á—ë—Ä–Ω—ã–π", White ‚Üí "–±–µ–ª—ã–π").
- –¶–≤–µ—Ç–∞ –ø–∏—à–∏ —Å –º–∞–ª–µ–Ω—å–∫–æ–π –±—É–∫–≤—ã: ["—á—ë—Ä–Ω—ã–π", "–±–µ–ª—ã–π", "–ø–∞–≤–ª–∏–Ω–∏–π –∑–µ–ª—ë–Ω—ã–π"].

–ü—Ä–∞–≤–∏–ª–æ –±–µ–∑ –º—É—Å–æ—Ä–Ω—ã—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫:
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ–±–∞–≤–ª—è–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ ¬´–Ω–µ—Ç¬ª, ¬´–Ω–µ –ø—Ä–∏–º–µ–Ω–∏–º–æ¬ª, ¬´–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç¬ª, ¬´none/n-a¬ª. –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ –ù–ï –¥–æ–±–∞–≤–ª—è–π –∫–ª—é—á.

–ü—Ä–∞–≤–∏–ª–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π:
- –ó–Ω–∞—á–µ–Ω–∏—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ –ø–æ—Å–ª–µ –¥–≤–æ–µ—Ç–æ—á–∏—è –Ω–∞—á–∏–Ω–∞–π —Å–æ —Å—Ç—Ä–æ—á–Ω–æ–π –±—É–∫–≤—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä: "–ñ–µ—Å—Ç–∫–æ—Å—Ç—å: –º—è–≥–∫–∞—è", "–°–ø–æ—Å–æ–± –∑–∞–∫—Ä—ã—Ç–∏—è: –º–æ–ª–Ω–∏—è").
- –ò—Å–∫–ª—é—á–µ–Ω–∏—è: –∞–±–±—Ä–µ–≤–∏–∞—Ç—É—Ä—ã —Ä–∞–∑–º–µ—Ä–æ–≤ (S, M, L, XL) –∏ –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (30 –º–ª –∏ —Ç.–ø.) –æ—Å—Ç–∞–≤–ª—è–π –∫–∞–∫ –µ—Å—Ç—å.
- –†–∞–∑–º–µ—Ä—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ "—á–∏—Å–ª–æ √ó —á–∏—Å–ª–æ —Å–º" (–∏—Å–ø–æ–ª—å–∑—É–π —Å–∏–º–≤–æ–ª "√ó", –Ω–µ "x" –∏ –Ω–µ "X").

–ö–∞–∫ –∏–∑–≤–ª–µ–∫–∞—Ç—å —Å–º—ã—Å–ª:
- –ï—Å–ª–∏ –µ—Å—Ç—å sku_props/skus: –∏—Å–ø–æ–ª—å–∑—É–π –∏—Ö, —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å —Å–æ—Å—Ç–∞–≤ –Ω–∞–±–æ—Ä–∞ (–∫–∞–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è –≤ –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö). –ú–æ–∂–Ω–æ —É–ø–æ–º—è–Ω—É—Ç—å 2‚Äì4 –æ—Å–Ω–æ–≤–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ (–±–µ–∑ –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –≤—Å–µ—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤).
- –ù–µ –¥–µ–ª–∞–π –≤—ã–≤–æ–¥ ¬´–æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ç = ...¬ª, –µ—Å–ª–∏ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞—Ç—Ä–∏–±—É—Ç –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –≤–∞—Ä–∏–∞–Ω—Ç–∞–º –∫–æ–º–ø–ª–µ–∫—Ç–∞.
- product_props –∏—Å–ø–æ–ª—å–∑—É–π —Ç–æ–ª—å–∫–æ –∫–∞–∫ —Ñ–∞–∫—Ç—ã, –Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–π ¬´–º—É—Å–æ—Ä–Ω—ã–µ¬ª –∑–Ω–∞—á–µ–Ω–∏—è (–ø—Ä–æ—á–µ–µ/ÂÖ∂‰ªñ).

–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –æ–±—ä—ë–º—É:
- main_characteristics: –º–∞–∫—Å–∏–º—É–º 4 –∫–ª—é—á–∞.
- –î–ª—è –Ω–∞–±–æ—Ä–æ–≤ —ç–ª–µ–∫—Ç—Ä–æ–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π –û–î–ù–£ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫—É "–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã": –∫–æ—Ä–æ—Ç–∫–∞—è —Å—Ç—Ä–æ–∫–∞/—Å–ø–∏—Å–æ–∫ –∏–∑ 3‚Äì4 —Å–ª–æ–≤ (–±–µ–∑ –º–∞—Ä–∫–µ—Ä–æ–≤ –∏ –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤).
- –£–±–∏—Ä–∞–π –ª—é–±—ã–µ "—Å–ª—É–∂–µ–±–Ω—ã–µ" —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–º–æ–≥–∞—é—Ç –ø–æ–Ω—è—Ç—å —Ç–æ–≤–∞—Ä.

–ü–†–ò–ú–ï–†–´ –ü–†–ê–í–ò–õ–¨–ù–û–ì–û –§–û–†–ú–ò–†–û–í–ê–ù–ò–Ø:

–ü—Ä–∏–º–µ—Ä 1 (–æ–¥–µ–∂–¥–∞ —Å –∫–∏—Ç–∞–π—Å–∫–∏–º–∏ —Ü–≤–µ—Ç–∞–º–∏):
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: {"title": "ÈïøË¢ñTÊÅ§", "available_colors": ["ÈªëËâ≤", "ÁôΩËâ≤", "Á∫¢Ëâ≤"]}
–ü–†–ê–í–ò–õ–¨–ù–´–ô –æ—Ç–≤–µ—Ç:
{
  "title": "–§—É—Ç–±–æ–ª–∫–∞ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ —Ä—É–∫–∞–≤–∞–º–∏",
  "description": "–§—É—Ç–±–æ–ª–∫–∞ —Å –¥–ª–∏–Ω–Ω—ã–º–∏ —Ä—É–∫–∞–≤–∞–º–∏. –ò–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –∏–∑ —Ö–ª–æ–ø–∫–∞.",
  "main_characteristics": {
    "–°–æ—Å—Ç–∞–≤": "—Ö–ª–æ–ø–æ–∫",
    "–¶–≤–µ—Ç–∞": ["—á—ë—Ä–Ω—ã–π", "–±–µ–ª—ã–π", "–∫—Ä–∞—Å–Ω—ã–π"]
  },
  "additional_info": {},
  "hashtags": ["—Ñ—É—Ç–±–æ–ª–∫–∞", "—Ö–ª–æ–ø–æ–∫"],
  "emoji": "üëï"
}

–ü—Ä–∏–º–µ—Ä 2 (–Ω–∞–±–æ—Ä —Ç—Ä—É—Å–æ–≤ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–º):
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: {"title": "3Êù°ÂÜÖË£§Â•óË£Ö", "product_props": [{"ÊùêË¥®": "modal"}]}
–ü–†–ê–í–ò–õ–¨–ù–´–ô –æ—Ç–≤–µ—Ç:
{
  "title": "–ù–∞–±–æ—Ä –∏–∑ —Ç—Ä—ë—Ö —Ç—Ä—É—Å–æ–≤",
  "description": "–ù–∞–±–æ—Ä –∏–∑ —Ç—Ä—ë—Ö —Ç—Ä—É—Å–æ–≤ –∏–∑ –º–æ–¥–∞–ª–∞. –ú—è–≥–∫–∞—è –ø—Ä–∏—è—Ç–Ω–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å.",
  "main_characteristics": {
    "–°–æ—Å—Ç–∞–≤": "–º–æ–¥–∞–ª"
  },
  "additional_info": {},
  "hashtags": ["—Ç—Ä—É—Å—ã", "–º–æ–¥–∞–ª"],
  "emoji": "ü©≤"
}

–ü—Ä–∏–º–µ—Ä 3 (—Å—É–º–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–æ–º —Ä–∞–∑–º–µ—Ä–æ–≤):
–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: {"title": "GucciÊâãÊú∫ÂåÖ", "product_props": [{"Â∞∫ÂØ∏": "18.12cm"}]}
–ü–†–ê–í–ò–õ–¨–ù–´–ô –æ—Ç–≤–µ—Ç:
{
  "title": "–°—É–º–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ Gucci",
  "description": "–ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Å—É–º–∫–∞ –¥–ª—è —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–∑ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ Gucci.",
  "main_characteristics": {
    "–†–∞–∑–º–µ—Ä—ã": "18 √ó 12 —Å–º"
  },
  "additional_info": {},
  "hashtags": ["—Å—É–º–∫–∞–∂–∞–Ω–∞—Ç–µ–ª–µ—Ñ–æ–Ω", "–±—Ä–µ–Ω–¥–æ–≤—ã–π–∞–∫—Å–µ—Å—Å—É–∞—Ä"],
  "emoji": "üëú"
}

–î–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞ (JSON):
{product_data}
""".strip()

    # –ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –¥–ª—è Responses API
    # Responses API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π OpenAI (gpt-4 –∏ gpt-5) —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
    GPT5_PREFIXES = ("gpt-5", "o3", "o4")  # –ú–æ–¥–µ–ª–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ reasoning
    RESPONSES_JSON_TOKENS = 4500  # –õ–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è JSON-–æ—Ç–≤–µ—Ç–æ–≤
    RESPONSES_TRANSLATE_TOKENS = 500  # –õ–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤
    RESPONSES_POSTPROCESS_TOKENS = 2000  # –õ–∏–º–∏—Ç —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å—Ç–∞

    def __init__(self, model_name: str | None = None):
        if not settings.OPENAI_API_KEY:
            raise ValueError(
                "OPENAI_API_KEY –Ω–µ –∑–∞–¥–∞–Ω. –£–∫–∞–∂–∏—Ç–µ –∫–ª—é—á –≤ .env, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å OpenAI."
            )

        source_model = model_name or settings.OPENAI_MODEL or "gpt-4o-mini"
        model_raw = source_model.strip()
        self.model = model_raw or "gpt-4o-mini"
        # Responses API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π OpenAI —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
        # –ï—Å–ª–∏ –æ—Ç–∫–ª—é—á—ë–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —É—Å—Ç–∞—Ä–µ–≤—à–∏–π Chat Completions API
        self.use_responses_api = getattr(settings, "OPENAI_USE_RESPONSES_API", True)
        
        # –£—Ä–æ–≤–µ–Ω—å —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π –¥–ª—è gpt-5 –º–æ–¥–µ–ª–µ–π
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
        reasoning_effort_raw = (getattr(settings, "OPENAI_REASONING_EFFORT", "") or "").strip()
        if reasoning_effort_raw:
            # –ù–æ—Ä–º–∞–ª–∏–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏
            self.reasoning_effort = self._normalize_reasoning_effort(self.model, reasoning_effort_raw)
        else:
            # –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –º–æ–¥–µ–ª–∏
            _, default_value = self._get_supported_reasoning_effort_values(self.model)
            self.reasoning_effort = default_value

        # –í–ê–ñ–ù–û: –º–æ–¥–µ–ª–∏ —Å–µ–º–µ–π—Å—Ç–≤–∞ gpt-5 —Ç—Ä–µ–±—É—é—Ç Responses API.
        # –ï—Å–ª–∏ Responses API –æ—Ç–∫–ª—é—á—ë–Ω, –¥–µ–ª–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–π fallback –Ω–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º—É—é –º–æ–¥–µ–ª—å
        # –¥–ª—è Chat Completions, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å ¬´–ø—É—Å—Ç—ã—Ö¬ª –æ—Ç–≤–µ—Ç–æ–≤ (content=None).
        if self._is_gpt5_model(self.model) and not self.use_responses_api:
            fallback = (getattr(settings, "OPENAI_FALLBACK_CHAT_MODEL", "") or "gpt-4o-mini").strip() or "gpt-4o-mini"
            logger.warning(
                "–í—ã–±—Ä–∞–Ω–∞ –º–æ–¥–µ–ª—å OpenAI '%s' (—Å–µ–º–µ–π—Å—Ç–≤–æ gpt-5), –Ω–æ Responses API –æ—Ç–∫–ª—é—á—ë–Ω. "
                "–ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ fallback-–º–æ–¥–µ–ª—å –¥–ª—è Chat Completions: '%s'.",
                self.model,
                fallback,
            )
            self.model = fallback

        # –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–Ω–µ—à–Ω–µ–≥–æ —à–ª—é–∑–∞ (OpenAI Gateway)
        base_url = (getattr(settings, "OPENAI_BASE_URL", "") or "").strip() or None
        extra_headers: dict[str, str] = {}
        gateway_token = (getattr(settings, "OPENAI_GATEWAY_TOKEN", "") or "").strip()
        if gateway_token:
            extra_headers["X-Gateway-Token"] = gateway_token

        self.client = AsyncOpenAI(
            api_key=settings.OPENAI_API_KEY,
            base_url=base_url,
            default_headers=extra_headers or None,
        )

    @classmethod
    def _is_gpt5_model(cls, model_name: str) -> bool:
        """
        –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –º–æ–¥–µ–ª—å —Å–µ–º–µ–π—Å—Ç–≤–∞ gpt-5 (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç reasoning).
        """
        normalized = (model_name or "").strip().lower()
        return any(normalized.startswith(prefix) for prefix in cls.GPT5_PREFIXES)
    
    @classmethod
    def _get_supported_reasoning_effort_values(cls, model_name: str) -> tuple[list[str], str]:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è reasoning.effort –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ –∏ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
        
        –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ OpenAI:
        - gpt-5, gpt-5-mini, gpt-5-nano: minimal, low, medium, high (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: minimal)
        - gpt-5.1, gpt-5.1-mini, gpt-5.1-nano: none, low, medium, high (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: low)
        - gpt-5.2 –∏ –¥—Ä—É–≥–∏–µ –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏: –º–æ–≥—É—Ç –∏–º–µ—Ç—å —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è
        
        Returns:
            tuple[list[str], str]: (—Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π, –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
        """
        normalized = (model_name or "").strip().lower()
        
        # –ú–æ–¥–µ–ª–∏ gpt-5.1 –∏ –≤—ã—à–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç none –≤–º–µ—Å—Ç–æ minimal
        if normalized.startswith("gpt-5.1") or normalized.startswith("gpt-5.2"):
            return (["none", "low", "medium", "high"], "low")
        
        # –ú–æ–¥–µ–ª–∏ gpt-5 (–±–µ–∑ –≤–µ—Ä—Å–∏–∏) –∏—Å–ø–æ–ª—å–∑—É—é—Ç minimal
        if normalized.startswith("gpt-5"):
            return (["minimal", "low", "medium", "high"], "minimal")
        
        # –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö gpt-5 –º–æ–¥–µ–ª–µ–π (o3, o4 –∏ —Ç.–¥.) –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è gpt-5.1
        if normalized.startswith("o3") or normalized.startswith("o4"):
            return (["none", "low", "medium", "high"], "low")
        
        # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é (–Ω–µ –¥–æ–ª–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–ª—è –Ω–µ-gpt5 –º–æ–¥–µ–ª–µ–π)
        return (["low", "medium", "high"], "low")
    
    def _normalize_reasoning_effort(self, model_name: str, user_value: str) -> str:
        """
        –ù–æ—Ä–º–∞–ª–∏–∑—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ reasoning.effort –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏.
        –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏ –º–æ–¥–µ–ª–µ–π.
        
        Args:
            model_name: –ù–∞–∑–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
            user_value: –ó–Ω–∞—á–µ–Ω–∏–µ –∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        
        Returns:
            str: –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ–µ –º–æ–¥–µ–ª—å—é
        """
        supported_values, default_value = self._get_supported_reasoning_effort_values(model_name)
        user_value_lower = (user_value or "").strip().lower()
        
        # –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —É–∂–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –µ–≥–æ
        if user_value_lower in supported_values:
            return user_value_lower
        
        # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –º–µ–∂–¥—É –≤–µ—Ä—Å–∏—è–º–∏
        conversion_map = {
            "minimal": "low",  # minimal -> low –¥–ª—è –º–æ–¥–µ–ª–µ–π 5.1+
            "none": "minimal",  # none -> minimal –¥–ª—è –º–æ–¥–µ–ª–µ–π 5.0
            "low": "low",      # low –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–µ–∑–¥–µ
            "medium": "medium",  # medium –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–µ–∑–¥–µ
            "high": "high",    # high –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤–µ–∑–¥–µ
        }
        
        # –ü—ã—Ç–∞–µ–º—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å
        if user_value_lower in conversion_map:
            converted = conversion_map[user_value_lower]
            if converted in supported_values:
                logger.info(
                    "–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ reasoning.effort: '%s' -> '%s' –¥–ª—è –º–æ–¥–µ–ª–∏ '%s'",
                    user_value_lower,
                    converted,
                    model_name,
                )
                return converted
        
        # –ï—Å–ª–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –Ω–µ —É–¥–∞–ª–∞—Å—å, –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        logger.warning(
            "–ó–Ω–∞—á–µ–Ω–∏–µ reasoning.effort '%s' –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –º–æ–¥–µ–ª—å—é '%s'. "
            "–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: %s. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: '%s'.",
            user_value_lower,
            model_name,
            supported_values,
            default_value,
        )
        return default_value

    async def generate_post_content(
        self, product_data: dict
    ) -> dict | tuple[dict, TokensUsage]:
        """
        –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ–ø–∏—Å–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ —á–µ—Ä–µ–∑ OpenAI.
        
        Returns:
            dict: JSON —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –ø–æ—Å—Ç–∞
            tuple[dict, TokensUsage]: JSON —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞)
        """
        # –í–∞–∂–Ω–æ: –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π JSON, —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –Ω–∞ –ø—Ä–æ–±–µ–ª—ã/–ø–µ—Ä–µ–Ω–æ—Å—ã —Å—Ç—Ä–æ–∫
        product_info_str = json.dumps(product_data, ensure_ascii=False, separators=(",", ":"))
        
        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–æ–∫–µ–Ω–æ–≤ (—Ç–æ–ª—å–∫–æ –≤ DEBUG —Ä–µ–∂–∏–º–µ)
        if settings.DEBUG_MODE:
            try:
                import tiktoken
                encoding = tiktoken.encoding_for_model(self.model if self.model.startswith("gpt-") else "gpt-4o")
                prompt_tokens = len(encoding.encode(prompt))
                data_tokens = len(encoding.encode(product_info_str))
                logger.info(
                    f"[OpenAI] –†–∞–∑–º–µ—Ä –ø—Ä–æ–º–ø—Ç–∞: ~{prompt_tokens} —Ç–æ–∫–µ–Ω–æ–≤, —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö: ~{data_tokens} —Ç–æ–∫–µ–Ω–æ–≤, "
                    f"—Ä–∞–∑–º–µ—Ä JSON –¥–∞–Ω–Ω—ã—Ö: {len(product_info_str)} —Å–∏–º–≤–æ–ª–æ–≤"
                )
            except ImportError:
                # –ï—Å–ª–∏ tiktoken –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
                pass
            except Exception:
                # –î—Ä—É–≥–∏–µ –æ—à–∏–±–∫–∏ —Ç–æ–∂–µ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
                pass

        # –í–∞—Ä–∏–∞–Ω—Ç –ø—Ä–æ–º–ø—Ç–∞ –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è OpenAI —á–µ—Ä–µ–∑ .env,
        # —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ/—Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ –±—ã—Å—Ç—Ä–æ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å—Å—è.
        prompt_variant = (getattr(settings, "OPENAI_PROMPT_VARIANT", "") or "compact_v2").strip().lower()
        if prompt_variant in {"shared", "legacy", "default"}:
            prompt = POST_GENERATION_PROMPT.replace("{product_data}", product_info_str)
        elif prompt_variant in {"compact_v1", "v1"}:
            prompt = self.OPENAI_COMPACT_PROMPT_V1.replace("{product_data}", product_info_str)
        elif prompt_variant in {"compact_v3", "v3"}:
            # –£–ª—É—á—à–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è compact_v2 —Å –∂—ë—Å—Ç–∫–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø—Ä–æ—Ç–∏–≤ –∫–∏—Ç–∞–π—Å–∫–∏—Ö –∏–µ—Ä–æ–≥–ª–∏—Ñ–æ–≤ –∏ —É–ª—É—á—à–µ–Ω–Ω–æ–π —Å—Ç–∏–ª–∏—Å—Ç–∏–∫–æ–π
            prompt = self.OPENAI_COMPACT_PROMPT_V3.replace("{product_data}", product_info_str)
        else:
            # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ–º –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–π compact_v2
            prompt = self.OPENAI_COMPACT_PROMPT_V2.replace("{product_data}", product_info_str)

        if settings.DEBUG_MODE:
            print(f"[OpenAI] –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–º–ø—Ç ({self.model}):\n{prompt[:500]}...")

        def _strip_fences(text: str) -> str:
            cleaned = (text or "").strip()
            if cleaned.startswith("```json"):
                cleaned = cleaned[7:]
            if cleaned.startswith("```"):
                cleaned = cleaned[3:]
            if cleaned.endswith("```"):
                cleaned = cleaned[:-3]
            return cleaned.strip()

        def _extract_first_json_object(text: str) -> str | None:
            """
            –ü—ã—Ç–∞–µ—Ç—Å—è –∏–∑–≤–ª–µ—á—å –ø–µ—Ä–≤—ã–π –≤–∞–ª–∏–¥–Ω—ã–π JSON-–æ–±—ä–µ–∫—Ç –∏–∑ —Ç–µ–∫—Å—Ç–∞ –ø–æ –±–∞–ª–∞–Ω—Å—É —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ–∫.
            –≠—Ç–æ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –º–æ–¥–µ–ª—å –≤–µ—Ä–Ω—É–ª–∞ –ª–∏—à–Ω–∏–π —Ç–µ–∫—Å—Ç –∏–ª–∏ –æ–±–æ—Ä–≤–∞–ª–∞ —Ö–≤–æ—Å—Ç.
            """
            s = (text or "")
            start = s.find("{")
            if start < 0:
                return None
            depth = 0
            in_str = False
            escape = False
            for i in range(start, len(s)):
                ch = s[i]
                if in_str:
                    if escape:
                        escape = False
                        continue
                    if ch == "\\":
                        escape = True
                        continue
                    if ch == '"':
                        in_str = False
                    continue
                else:
                    if ch == '"':
                        in_str = True
                        continue
                    if ch == "{":
                        depth += 1
                    elif ch == "}":
                        depth -= 1
                        if depth == 0:
                            return s[start : i + 1]
            return None

        # –†–µ—Ç—Ä–∞–∏–º, –µ—Å–ª–∏ –º–æ–¥–µ–ª—å –æ–±—Ä–µ–∑–∞–ª–∞ JSON (—á–∞—Å—Ç–æ —Å–ª—É—á–∞–µ—Ç—Å—è –ø—Ä–∏ max_output_tokens –±–ª–∏–∑–∫–æ –∫ –ª–∏–º–∏—Ç—É)
        max_out = int(getattr(settings, "OPENAI_MAX_OUTPUT_TOKENS", 2400) or 2400)
        max_cap = 6000
        last_exc: Exception | None = None
        last_response_text: str = ""
        last_tokens_usage = TokensUsage()

        for attempt in range(3):
            try:
                result = await self.generate_json_response(
                    system_prompt=self.SYSTEM_PROMPT,
                    user_prompt=prompt,
                    max_output_tokens=max_out,
                    temperature=0.1,  # –ù–∏–∑–∫–∞—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
                )
                if isinstance(result, tuple):
                    llm_response, tokens_usage = result
                else:
                    llm_response = result
                    tokens_usage = TokensUsage()

                last_response_text = llm_response or ""
                last_tokens_usage = tokens_usage

                if settings.DEBUG_MODE:
                    print(f"[OpenAI] –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç:\n{llm_response}")
                    if tokens_usage.total_tokens > 0:
                        print(
                            f"[OpenAI] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤: {tokens_usage.prompt_tokens} –≤—Ö–æ–¥–Ω—ã—Ö, "
                            f"{tokens_usage.completion_tokens} –≤—ã—Ö–æ–¥–Ω—ã—Ö, —Å—Ç–æ–∏–º–æ—Å—Ç—å: ${tokens_usage.total_cost:.6f}"
                        )

                cleaned_response = _strip_fences(llm_response)
                try:
                    parsed_content = json.loads(cleaned_response)
                    return parsed_content, tokens_usage
                except json.JSONDecodeError as exc:
                    # 1) –ü—Ä–æ–±—É–µ–º –≤—ã—Ç–∞—â–∏—Ç—å –ø–µ—Ä–≤—ã–π JSON-–æ–±—ä–µ–∫—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å –º—É—Å–æ—Ä/–ª–∏—à–Ω–∏–π —Ç–µ–∫—Å—Ç)
                    extracted = _extract_first_json_object(cleaned_response)
                    if extracted:
                        try:
                            parsed_content = json.loads(extracted)
                            return parsed_content, tokens_usage
                        except Exception:
                            pass

                    last_exc = exc
                    # 2) –ï—Å–ª–∏ –ø–æ—Ö–æ–∂–µ –Ω–∞ –æ–±—Ä–µ–∑–∫—É –ø–æ –ª–∏–º–∏—Ç—É ‚Äî —É–≤–µ–ª–∏—á–∏–º max_out –∏ –ø–æ–≤—Ç–æ—Ä–∏–º
                    if max_out < max_cap:
                        # –î–µ–ª–∞–µ–º –º—è–≥–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ: x1.4 + 400
                        max_out = min(max_cap, int(max_out * 1.4) + 400)
                        continue
                    break
            except OpenAIError as exc:
                raise RuntimeError(f"OpenAI –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É: {exc}") from exc
            except Exception as exc:
                last_exc = exc
                break

        # –ï—Å–ª–∏ –¥–æ—à–ª–∏ —Å—é–¥–∞ ‚Äî –Ω–µ —Å–º–æ–≥–ª–∏ –ø–æ–ª—É—á–∏—Ç—å –≤–∞–ª–∏–¥–Ω—ã–π JSON
        sample = _strip_fences(last_response_text)[:1500]
        raise ValueError(f"OpenAI –≤–µ—Ä–Ω—É–ª –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π JSON: {last_exc}. Response sample:\n{sample}") from last_exc

    async def postprocess_post_text(
        self,
        post_text: str,
    ) -> tuple[str, TokensUsage]:
        """
        –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ —É–∂–µ –ì–û–¢–û–í–û–ì–û —Ç–µ–∫—Å—Ç–∞ –ø–æ—Å—Ç–∞.

        –ó–∞–¥–∞—á–∏:
        - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–µ, –æ—Ä—Ñ–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –∏ —Å—Ç–∏–ª–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏.
        - –ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ, –ø–∞–¥–µ–∂–∏ –∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏.
        - –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∏–Ω–æ—è–∑—ã—á–Ω—ã–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã (–∫–∏—Ç–∞–π—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π), –∫—Ä–æ–º–µ –±—Ä–µ–Ω–¥–æ–≤.
        - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–ª–æ–∫–æ–≤ –ø–æ—Å—Ç–∞, —Ä–∞–∑–º–µ—Ç–∫—É, –ø–æ—Ä—è–¥–æ–∫ —Å—Ç—Ä–æ–∫ –∏ —ç–º–æ–¥–∑–∏.

        –í–ê–ñ–ù–û:
        - –ù–ï–õ–¨–ó–Ø –ø–µ—Ä–µ–ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç —Å –Ω—É–ª—è, —Ç–æ–ª—å–∫–æ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞.
        - –ù–ï–õ–¨–ó–Ø –¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å —Å–º—ã—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏.
        """
        if not post_text:
            # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç–∞ –Ω–µ—Ç ‚Äî –ø—Ä–æ—Å—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç–æ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –Ω—É–ª–µ–≤—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            return post_text, TokensUsage()

        # –§–æ—Ä–º–∏—Ä—É–µ–º –ø—Ä–æ–º–ø—Ç –¥–ª—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏.
        user_prompt = POSTPROCESS_POST_PROMPT.replace("{post_text}", post_text)

        # –î–ª—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º Responses API (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ) –≤ —Ç–µ–∫—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ,
        # –±–µ–∑ –Ω–∞–≤—è–∑–∞–Ω–Ω–æ–≥–æ JSON-—Ñ–æ—Ä–º–∞—Ç–∞.
        max_out = self.RESPONSES_POSTPROCESS_TOKENS
        system_prompt = (
            "–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –∫–æ—Ä—Ä–µ–∫—Ç–æ—Ä —Ä—É—Å—Å–∫–æ–≥–æ —è–∑—ã–∫–∞. "
            "–¢–µ–±–µ –ø–µ—Ä–µ–¥–∞—é—Ç —É–∂–µ –≥–æ—Ç–æ–≤—ã–π –ø–æ—Å—Ç –¥–ª—è Telegram; —Ç–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äî "
            "–∞–∫–∫—É—Ä–∞—Ç–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —è–∑—ã–∫ (–≥—Ä–∞–º–º–∞—Ç–∏–∫—É, —Å—Ç–∏–ª–∏—Å—Ç–∏–∫—É, —á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ, "
            "–Ω–µ–ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–µ —Å–ª–æ–≤–∞), –ù–ï –Ω–∞—Ä—É—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–ª–æ–∫–æ–≤ –∏ —Ä–∞–∑–º–µ—Ç–∫—É."
        )

        # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ DEBUG-—Ä–µ–∂–∏–º–µ
        if settings.DEBUG_MODE:
            try:
                logger.debug(
                    "[OpenAI][postprocess] model=%s | prompt_len=%s | system_prompt_len=%s\n"
                    "--- system_prompt ---\n%s\n--- user_prompt ---\n%s\n",
                    self.model,
                    len(user_prompt),
                    len(system_prompt),
                    system_prompt,
                    user_prompt[:2000] if len(user_prompt) > 2000 else user_prompt,
                )
                print(f"[OpenAI][postprocess] –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø—Ä–æ–º–ø—Ç –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏ ({self.model}):\n{user_prompt[:500]}...")
            except Exception:
                pass

        # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—á–∏—Ç–∞–µ–º –æ—Ç–¥–µ–ª—å–Ω–æ, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ
        # —á–∏—Å—Ç–æ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–∫–ª–∞–¥ —ç—Ç–æ–≥–æ —à–∞–≥–∞.
        if self.use_responses_api:
            text, tokens_usage = await self._call_responses_api(
                prompt=user_prompt,
                system_prompt=system_prompt,
                max_output_tokens=max_out,
                temperature=0.1,
                expect_json=False,
            )
        else:
            # Fallback –Ω–∞ Chat Completions API (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π, –Ω–æ –≤–æ–∑–º–æ–∂–Ω—ã–π)
            result = await self._call_chat_completions(
                user_prompt,
                system_prompt=system_prompt,
                expect_json=False,
                max_tokens=max_out,
                temperature=0.1,
            )
            if isinstance(result, tuple):
                text, tokens_usage = result
            else:
                text = result
                tokens_usage = TokensUsage()

        cleaned = (text or "").strip()
        # –ù–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π —É–±–∏—Ä–∞–µ–º –æ–±—Ä–∞–º–ª–µ–Ω–∏–µ –≤ ``` –µ—Å–ª–∏ –º–æ–¥–µ–ª—å –≤—Å—ë-—Ç–∞–∫–∏ –≤–µ—Ä–Ω—É–ª–∞ markdown.
        if cleaned.startswith("```"):
            # –û—á–µ–Ω—å –≥—Ä—É–±–∞—è –æ—á–∏—Å—Ç–∫–∞: —É–±–∏—Ä–∞–µ–º –ø–µ—Ä–≤—ã–µ –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–æ–π–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏.
            if cleaned.startswith("```json"):
                cleaned = cleaned[7:]
            else:
                cleaned = cleaned[3:]
            if cleaned.endswith("```"):
                cleaned = cleaned[:-3]
            cleaned = cleaned.strip()

        # –ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É,
        # –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –æ—Ç–¥–∞—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç, —á—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç.
        if not cleaned:
            return post_text, tokens_usage

        return cleaned, tokens_usage

    async def generate_json_response(
        self,
        system_prompt: str,
        user_prompt: str,
        max_output_tokens: int | None = None,
        temperature: float | None = None,
    ) -> str | tuple[str, TokensUsage]:
        """
        –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ (JSON) –æ—Ç –º–æ–¥–µ–ª–∏.
        –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Responses API –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ OpenAI.
        
        Returns:
            str: –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ (—Å—Ç–∞—Ä–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
            tuple[str, TokensUsage]: –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞)
        """
        # Responses API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
        if self.use_responses_api:
            text, tokens_usage = await self._call_responses_api(
                prompt=user_prompt,
                system_prompt=system_prompt,
                max_output_tokens=max_output_tokens,
                temperature=temperature,
                expect_json=True,
            )
        else:
            # Fallback –Ω–∞ Chat Completions API (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π, –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
            result = await self._call_chat_completions(
                user_prompt,
                system_prompt=system_prompt,
                expect_json=True,
                max_tokens=max_output_tokens,
                temperature=temperature,
            )
            
            # –ù–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ç–µ–∂ (text, tokens_usage)
            if isinstance(result, tuple):
                text, tokens_usage = result
            else:
                text = result
                tokens_usage = TokensUsage()
        
        if not text:
            raise ValueError("OpenAI –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç.")
        
        return text, tokens_usage

    async def _call_chat_completions(
        self,
        prompt: str,
        system_prompt: str | None = None,
        expect_json: bool = True,
        max_tokens: int | None = None,
        temperature: float | None = None,
        model_override: str | None = None,
    ) -> str | tuple[str, TokensUsage]:
        """
        –í—ã–∑–æ–≤ Chat Completions API (gpt-4o, gpt-4o-mini, gpt-4.1-mini, gpt-5-mini –∏ —Ç.–ø.).
        
        –î–ª—è –º–æ–¥–µ–ª–µ–π —Å–µ–º–µ–π—Å—Ç–≤–∞ gpt-5:
        - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è max_completion_tokens –≤–º–µ—Å—Ç–æ max_tokens
        - –ü–∞—Ä–∞–º–µ—Ç—Ä temperature –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
        
        Returns:
            str: –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ (—Å—Ç–∞—Ä–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞)
            tuple[str, TokensUsage]: –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞)
        """
        messages = [
            {"role": "system", "content": system_prompt or self.SYSTEM_PROMPT},
            {"role": "user", "content": prompt},
        ]
        model_name = model_override or self.model
        is_gpt5_model = self._is_gpt5_model(model_name)  # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –º–æ–¥–µ–ª—å gpt-5
        
        kwargs = {
            "model": model_name,
            "messages": messages,
        }
        if expect_json:
            kwargs["response_format"] = {"type": "json_object"}
        
        # –î–ª—è –º–æ–¥–µ–ª–µ–π gpt-5 –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è temperature
        if not is_gpt5_model:
            temp_value = temperature if temperature is not None else (0.1 if self.supports_temperature else None)
            if temp_value is not None and self.supports_temperature:
                kwargs["temperature"] = temp_value
        
        # –î–ª—è –º–æ–¥–µ–ª–µ–π gpt-5 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è max_completion_tokens –≤–º–µ—Å—Ç–æ max_tokens
        max_value = max_tokens if max_tokens is not None else (2000 if self.supports_max_tokens else None)
        if max_value is not None:
            if is_gpt5_model:
                kwargs["max_completion_tokens"] = max_value
            elif self.supports_max_tokens:
                kwargs["max_tokens"] = max_value

        response = await self.client.chat.completions.create(**kwargs)
        choice0 = response.choices[0]
        msg0 = choice0.message

        # –ù–æ–≤—ã–µ –ø–æ–ª—è SDK: –ø—Ä–∏ –æ—Ç–∫–∞–∑–µ/—Ñ–∏–ª—å—Ç—Ä–µ content –º–æ–∂–µ—Ç –±—ã—Ç—å None, –Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç reason/refusal.
        refusal = getattr(msg0, "refusal", None)
        if refusal:
            raise ValueError(f"OpenAI –æ—Ç–∫–∞–∑–∞–ª—Å—è –æ—Ç–≤–µ—á–∞—Ç—å: {refusal}")

        # –ò–Ω–æ–≥–¥–∞ –º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ tool_calls –≤–º–µ—Å—Ç–æ content (–Ω–µ –æ–∂–∏–¥–∞–µ–º –≤ —ç—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ).
        tool_calls = getattr(msg0, "tool_calls", None)
        if tool_calls and not getattr(msg0, "content", None):
            try:
                dump = json.dumps(msg0.model_dump(), ensure_ascii=False)[:1200]
            except Exception:
                dump = repr(tool_calls)[:800]
            raise ValueError(f"OpenAI –≤–µ—Ä–Ω—É–ª tool_calls –≤–º–µ—Å—Ç–æ —Ç–µ–∫—Å—Ç–∞. Fragment: {dump}")

        text = msg0.content or ""
        
        # –ò–∑–≤–ª–µ–∫–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ response.usage
        # –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ OpenAI, response.usage —Å–æ–¥–µ—Ä–∂–∏—Ç:
        # - prompt_tokens: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤–æ –≤—Ö–æ–¥–Ω–æ–º –ø—Ä–æ–º–ø—Ç–µ
        # - completion_tokens: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–≤–µ—Ç–µ
        # - total_tokens: –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
        tokens_usage = TokensUsage()
        if hasattr(response, "usage") and response.usage is not None:
            usage = response.usage
            # –ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ OpenAI
            try:
                prompt_tokens = usage.prompt_tokens if hasattr(usage, "prompt_tokens") else 0
                completion_tokens = usage.completion_tokens if hasattr(usage, "completion_tokens") else 0
                # total_tokens –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —É–∫–∞–∑–∞–Ω, —Ç–æ–≥–¥–∞ –≤—ã—á–∏—Å–ª—è–µ–º –µ–≥–æ
                if hasattr(usage, "total_tokens") and usage.total_tokens is not None:
                    total_tokens = usage.total_tokens
                else:
                    total_tokens = prompt_tokens + completion_tokens
                
                # –ü–æ–ª—É—á–∞–µ–º —Ü–µ–Ω—ã —Ç–æ–∫–µ–Ω–æ–≤ (–∑–∞ 1M —Ç–æ–∫–µ–Ω–æ–≤)
                prompt_price, completion_price = get_effective_pricing(
                    model_name=model_name,
                    prompt_price_override=getattr(settings, "OPENAI_PROMPT_PRICE_PER_1M", 0.0),
                    completion_price_override=getattr(settings, "OPENAI_COMPLETION_PRICE_PER_1M", 0.0),
                )
                
                # –ï—Å–ª–∏ —Ü–µ–Ω—ã –¥–æ—Å—Ç—É–ø–Ω—ã, –≤—ã—á–∏—Å–ª—è–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å
                if prompt_price > 0 or completion_price > 0:
                    tokens_usage = calculate_cost(
                        prompt_tokens=prompt_tokens,
                        completion_tokens=completion_tokens,
                        prompt_price_per_1m=prompt_price if prompt_price > 0 else 0.0,
                        completion_price_per_1m=completion_price if completion_price > 0 else 0.0,
                    )
                else:
                    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –±–µ–∑ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
                    tokens_usage = TokensUsage(
                        prompt_tokens=prompt_tokens,
                        completion_tokens=completion_tokens,
                        total_tokens=total_tokens,
                    )
            except (AttributeError, TypeError) as e:
                # –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ—Å—Ç—É–ø–µ –∫ –∞—Ç—Ä–∏–±—É—Ç–∞–º, –ª–æ–≥–∏—Ä—É–µ–º –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ–º
                if settings.DEBUG_MODE:
                    print(f"[OpenAI] –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤: {e}")
        
        # –ï—Å–ª–∏ –ø–æ –∫–∞–∫–æ–π-—Ç–æ –ø—Ä–∏—á–∏–Ω–µ —Ç–µ–∫—Å—Ç –ø—É—Å—Ç–æ–π, –¥–∞–¥–∏–º –±–æ–ª–µ–µ –ø–æ–ª–µ–∑–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É,
        # —á—Ç–æ–±—ã –ø–æ–Ω–∏–º–∞—Ç—å –ø–µ—Ä–≤–æ–ø—Ä–∏—á–∏–Ω—É (–º–æ–¥–µ–ª—å/—Ñ–∏–Ω–∏—à-—Å—Ç–∞—Ç—É—Å/—Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞).
        if not text:
            finish_reason = getattr(choice0, "finish_reason", None)
            try:
                resp_dump = json.dumps(response.model_dump(), ensure_ascii=False)[:1500]
            except Exception:
                resp_dump = repr(response)[:1500]
            raise ValueError(
                "OpenAI –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç. "
                f"finish_reason={finish_reason}. Raw fragment:\n{resp_dump}"
            )

        return text, tokens_usage

    async def _call_responses_api(
        self,
        prompt: str,
        system_prompt: str | None = None,
        max_output_tokens: int | None = None,
        temperature: float | None = None,
        expect_json: bool = True,
    ) -> tuple[str, TokensUsage]:
        """
        –í—ã–∑–æ–≤ Responses API –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π OpenAI (gpt-4 –∏ gpt-5).
        –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ OpenAI, Responses API - —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π.
        
        Args:
            prompt: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç
            system_prompt: –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç (–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏)
            max_output_tokens: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã—Ö–æ–¥–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
            temperature: –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≤—ã–±–æ—Ä–∫–∏ (0-2, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è gpt-4 –º–æ–¥–µ–ª–µ–π, –¥–ª—è gpt-5 –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è)
            expect_json: –û–∂–∏–¥–∞—Ç—å JSON-–æ—Ç–≤–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç text.format.type: "json_object")
        
        Returns:
            tuple[str, TokensUsage]: –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
        """
        max_tokens = max_output_tokens or self.RESPONSES_JSON_TOKENS
        max_cap = 6000
        last_dump = ""
        
        # –§–æ—Ä–º–∏—Ä—É–µ–º input –¥–ª—è Responses API
        # –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å instructions –¥–ª—è system prompt
        # –∏ input –¥–ª—è user prompt (–º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π –∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–º input items)
        instructions_text = system_prompt or self.SYSTEM_PROMPT
        input_text = prompt  # –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π –∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–º input items
        
        # –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞
        kwargs: dict = {
            "model": self.model,
            "instructions": instructions_text,  # System prompt —á–µ—Ä–µ–∑ instructions
            "input": input_text,  # User prompt —á–µ—Ä–µ–∑ input (—Å—Ç—Ä–æ–∫–∞)
        }
        
        # max_output_tokens –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π
        if max_tokens:
            kwargs["max_output_tokens"] = max_tokens
        
        # reasoning —Ç–æ–ª—å–∫–æ –¥–ª—è gpt-5 –º–æ–¥–µ–ª–µ–π
        is_gpt5 = self._is_gpt5_model(self.model)
        if is_gpt5:
            kwargs["reasoning"] = {"effort": self.reasoning_effort}
            # –î–ª—è gpt-5 –º–æ–¥–µ–ª–µ–π temperature –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è
        else:
            # temperature –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è gpt-4 –º–æ–¥–µ–ª–µ–π
            if temperature is not None:
                kwargs["temperature"] = temperature
            else:
                # –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∏–∑–∫—É—é —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—É –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤
                kwargs["temperature"] = 0.1
        
        # JSON —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ (text.format.type: "json_object")
        if expect_json:
            kwargs["text"] = {"format": {"type": "json_object"}}

        # –î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ –∑–∞–ø—Ä–æ—Å–∞ –≤ DEBUG (–±–µ–∑ –∫–ª—é—á–µ–π, —Å —É—Å–µ—á—ë–Ω–Ω—ã–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏)
        if settings.DEBUG_MODE:
            try:
                preview_instructions = (instructions_text or "")[:1200]
                preview_input = (input_text or "")[:1200]
                logger.debug(
                    "[OpenAI][request] model=%s | reasoning=%s | max_out=%s | temperature=%s\n--- instructions ---\n%s\n--- input ---\n%s\n",
                    self.model,
                    (kwargs.get("reasoning", {}).get("effort") if is_gpt5 else "-"),
                    kwargs.get("max_output_tokens"),
                    kwargs.get("temperature"),
                    preview_instructions,
                    preview_input,
                )
                _write_boot_debug(
                    "OpenAI request (responses)",
                    f"model={self.model}\nreasoning={kwargs.get('reasoning')}\nmax_out={kwargs.get('max_output_tokens')}\n"
                    f"temperature={kwargs.get('temperature')}\n\n--- instructions ---\n{instructions_text}\n\n--- input ---\n{input_text}\n",
                )
            except Exception:
                pass

        # –õ–æ–≥–∏—Ä—É–µ–º –∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–∑–æ–≤–∞ LLM (–±–µ–∑ –ø—Ä–æ–º–ø—Ç–æ–≤ –∏ –¥–∞–Ω–Ω—ã—Ö)
        try:
            logger.info(
                "OpenAI call: model=%s, api=responses, prompt_variant=%s, reasoning=%s, temperature=%s, max_output_tokens=%s",
                self.model,
                (getattr(settings, "OPENAI_PROMPT_VARIANT", "compact_v2") or "compact_v2"),
                (kwargs.get("reasoning", {}).get("effort") if is_gpt5 else "-"),
                kwargs.get("temperature"),
                kwargs.get("max_output_tokens"),
            )
        except Exception:
            pass

        for attempt in range(3):
            try:
                response = await self.client.responses.create(**kwargs)
                
                # –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ –æ—Ç–≤–µ—Ç–∞
                text = self._extract_text_from_response(response)
                if text:
                    if settings.DEBUG_MODE:
                        try:
                            logger.debug(
                                "[OpenAI][response] model=%s | len=%s | preview:\n%s",
                                self.model,
                                len(text),
                                text[:1200],
                            )
                            _write_boot_debug(
                                "OpenAI response (responses)",
                                f"model={self.model}\nlen={len(text)}\n\n--- full text ---\n{text}\n",
                            )
                        except Exception:
                            pass
                    # –ò–∑–≤–ª–µ–∫–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ response.usage
                    tokens_usage = self._extract_tokens_usage_from_response(response)
                    return text, tokens_usage

                # –ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –ø—É—Å—Ç–æ–π, –ø—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∏—á–∏–Ω—É
                try:
                    last_dump = json.dumps(response.model_dump(), ensure_ascii=False, indent=2)[:1500]
                except Exception:
                    last_dump = repr(response)

                details = getattr(response, "incomplete_details", None) or {}
                reason = getattr(details, "reason", None) or details.get("reason")

                # –ê–≤—Ç–æ—É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ª–∏–º–∏—Ç–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
                if reason == "max_output_tokens" and max_tokens < max_cap:
                    max_tokens = min(max_cap, int(max_tokens * 1.8))
                    kwargs["max_output_tokens"] = max_tokens
                    await asyncio.sleep(0.2)
                    continue

                if attempt < 2:
                    await asyncio.sleep(0.2)
            except Exception:
                if attempt < 2:
                    await asyncio.sleep(0.2)
                    continue
                raise

        raise ValueError(
            "OpenAI –≤–µ—Ä–Ω—É–ª –ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç –¥–ª—è Responses API. Raw fragment:\n"
            f"{last_dump}"
        )
    
    def _extract_tokens_usage_from_response(self, response) -> TokensUsage:
        """
        –ò–∑–≤–ª–µ–∫–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Ç–æ–∫–µ–Ω–æ–≤ –∏–∑ –æ—Ç–≤–µ—Ç–∞ Responses API.
        
        –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, usage —Å–æ–¥–µ—Ä–∂–∏—Ç:
        - input_tokens: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
        - output_tokens: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã—Ö–æ–¥–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤
        - output_tokens_details.reasoning_tokens: —Ç–æ–∫–µ–Ω—ã —Ä–∞—Å—Å—É–∂–¥–µ–Ω–∏–π (–¥–ª—è gpt-5)
        - total_tokens: –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
        """
        tokens_usage = TokensUsage()
        
        try:
            usage = getattr(response, "usage", None)
            if not usage:
                return tokens_usage
            
            # –ò–∑–≤–ª–µ–∫–∞–µ–º —Ç–æ–∫–µ–Ω—ã
            input_tokens = getattr(usage, "input_tokens", 0) or 0
            output_tokens = getattr(usage, "output_tokens", 0) or 0
            total_tokens = getattr(usage, "total_tokens", 0) or 0
            
            # –ï—Å–ª–∏ total_tokens –Ω–µ —É–∫–∞–∑–∞–Ω, –≤—ã—á–∏—Å–ª—è–µ–º
            if not total_tokens:
                total_tokens = input_tokens + output_tokens
            
            # –ü–æ–ª—É—á–∞–µ–º —Ü–µ–Ω—ã —Ç–æ–∫–µ–Ω–æ–≤ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ openai_pricing.py, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã –≤ .env)
            prompt_price, completion_price = get_effective_pricing(
                model_name=self.model,
                prompt_price_override=getattr(settings, "OPENAI_PROMPT_PRICE_PER_1M", 0.0),
                completion_price_override=getattr(settings, "OPENAI_COMPLETION_PRICE_PER_1M", 0.0),
            )
            
            # –í—ã—á–∏—Å–ª—è–µ–º —Å—Ç–æ–∏–º–æ—Å—Ç—å
            if prompt_price > 0 or completion_price > 0:
                tokens_usage = calculate_cost(
                    prompt_tokens=input_tokens,
                    completion_tokens=output_tokens,
                    prompt_price_per_1m=prompt_price if prompt_price > 0 else 0.0,
                    completion_price_per_1m=completion_price if completion_price > 0 else 0.0,
                )
            else:
                # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤ –±–µ–∑ —Å—Ç–æ–∏–º–æ—Å—Ç–∏
                tokens_usage = TokensUsage(
                    prompt_tokens=input_tokens,
                    completion_tokens=output_tokens,
                    total_tokens=total_tokens,
                )
        except (AttributeError, TypeError) as exc:
            if settings.DEBUG_MODE:
                logger.warning(f"[OpenAI] –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–∑–≤–ª–µ—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤: {exc}")
        
        return tokens_usage

    async def translate_text(
        self, text: str, target_language: str = "ru"
    ) -> str | tuple[str, TokensUsage]:
        """
        –ü–µ—Ä–µ–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π —è–∑—ã–∫ —á–µ—Ä–µ–∑ –≤—ã–±—Ä–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å OpenAI.
        
        Returns:
            str: –ü–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç (—Å—Ç–∞—Ä–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞)
            tuple[str, TokensUsage]: –ü–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞)
        """
        if not text:
            return text, TokensUsage()

        user_prompt = (
            f"–ü–µ—Ä–µ–≤–µ–¥–∏ —Å–ª–µ–¥—É—é—â–∏–π —Ç–µ–∫—Å—Ç –Ω–∞ {target_language}. "
            "–û—Ç–≤–µ—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–≤–æ–¥–æ–º –±–µ–∑ –ø–æ—è—Å–Ω–µ–Ω–∏–π.\n\n"
            f"{text}"
        )

        # –ò—Å–ø–æ–ª—å–∑—É–µ–º Responses API –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤ (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω–æ)
        if self.use_responses_api:
            translated, tokens_usage = await self._call_responses_api(
                prompt=user_prompt,
                system_prompt="–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫.",
                max_output_tokens=self.RESPONSES_TRANSLATE_TOKENS,
                temperature=0.1,
                expect_json=False,
            )
        else:
            # Fallback –Ω–∞ Chat Completions API (—É—Å—Ç–∞—Ä–µ–≤—à–∏–π)
            result = await self._call_chat_completions(
                user_prompt,
                system_prompt="–¢—ã –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫.",
                expect_json=False,
                max_tokens=self.RESPONSES_TRANSLATE_TOKENS,
                temperature=0.1,
            )
            # –ù–æ–≤–∞—è —Å–∏–≥–Ω–∞—Ç—É—Ä–∞: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–æ—Ä—Ç–µ–∂ (text, tokens_usage)
            if isinstance(result, tuple):
                translated, tokens_usage = result
            else:
                translated = result
                tokens_usage = TokensUsage()
        return (translated.strip() or text), tokens_usage

    @staticmethod
    def _extract_text_from_response(response) -> str:
        """
        –°–æ–±–∏—Ä–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ Responses API (response.output[*].content[*].text)
        """
        chunks: list[str] = []
        output = getattr(response, "output", None) or []
        for item in output:
            content_list: Iterable = getattr(item, "content", None) or []
            for part in content_list:
                text_value = OpenAIClient._extract_text_from_part(part)
                if text_value:
                    chunks.append(text_value)
        if chunks:
            return "".join(chunks)

        # fallback: –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –≤–µ—Ä—Å–∏–∏ SDK –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç output_text
        output_text = getattr(response, "output_text", None)
        if output_text:
            return output_text
        return ""

    @staticmethod
    def _extract_text_from_part(part) -> str:
        """
        –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –≤—ã–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç –∏–∑ —ç–ª–µ–º–µ–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞ Responses API.
        """
        # dataclass —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º text
        text_attr = getattr(part, "text", None)
        if text_attr:
            if isinstance(text_attr, str):
                return text_attr
            if isinstance(text_attr, list):
                pieces = []
                for segment in text_attr:
                    segment_text = getattr(segment, "text", None)
                    if segment_text:
                        pieces.append(segment_text)
                    elif isinstance(segment, dict):
                        value = segment.get("text")
                        if value:
                            pieces.append(value)
                if pieces:
                    return "".join(pieces)

        # –°–ª–æ–≤–∞—Ä—å
        if isinstance(part, dict):
            value = part.get("text")
            if isinstance(value, str):
                return value
            if isinstance(value, list):
                pieces = [seg.get("text") for seg in value if isinstance(seg, dict) and seg.get("text")]
                return "".join(pieces)

        return ""

    @staticmethod
    def _build_responses_input(system_text: str, user_text: str) -> list[dict]:
        """
        –§–æ—Ä–º–∏—Ä—É–µ—Ç input items –¥–ª—è Responses API (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è instructions).
        –°–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, input –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—Ç—Ä–æ–∫–æ–π –∏–ª–∏ –º–∞—Å—Å–∏–≤–æ–º input items.
        """
        return [
            {
                "role": "system",
                "content": [{"type": "input_text", "text": system_text}],
            },
            {
                "role": "user",
                "content": [{"type": "input_text", "text": user_text}],
            },
        ]

